<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Linux on Moody&#39;s</title>
    <link>https://mooody.me/tags/linux/</link>
    <description>Recent content in Linux on Moody&#39;s</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Mon, 30 Jan 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://mooody.me/tags/linux/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>VisionFive 2 å¼€ç®±è®°å½•</title>
      <link>https://mooody.me/posts/2023-01/visionfive-2-oobe/</link>
      <pubDate>Mon, 30 Jan 2023 00:00:00 +0000</pubDate>
      
      <guid>https://mooody.me/posts/2023-01/visionfive-2-oobe/</guid>
      <description>&lt;p&gt;å¿ƒå¿ƒå¿µå¿µçš„ VisionFive 2 æ¿å­ç»ˆäºæ”¶åˆ°äº†&lt;/p&gt;
&lt;blockquote&gt;
&lt;span class=&#34;spoiler&#34; title=&#34;ä½ çŸ¥é“çš„å¤ªå¤šäº†&#34;
  &gt;ï¼ˆå…¶å®æ—©å°±åˆ°äº†ï¼Œåªæ˜¯æˆ‘å½“æ—¶åœ¨åŠ æ‹¿å¤§ ğŸ æ²¡æ³•å–ç”¨ï¼‰&lt;/span
&gt;
&lt;/blockquote&gt;
&lt;p&gt;é¦–å…ˆæ”¾å‡ å¼ å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;1&#34; src=&#34;https://mooody.me/posts/2023-01/visionfive-2-oobe/01.box.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;2&#34; src=&#34;https://mooody.me/posts/2023-01/visionfive-2-oobe/02.in-box.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;3&#34; src=&#34;https://mooody.me/posts/2023-01/visionfive-2-oobe/03.overview.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;4&#34; src=&#34;https://mooody.me/posts/2023-01/visionfive-2-oobe/04.side-view.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;5&#34; src=&#34;https://mooody.me/posts/2023-01/visionfive-2-oobe/05.sockets.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;6&#34; src=&#34;https://mooody.me/posts/2023-01/visionfive-2-oobe/06.m2-emmc.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;7&#34; src=&#34;https://mooody.me/posts/2023-01/visionfive-2-oobe/07.cpu-mem.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å› ä¸ºæ¿å­ä¸Šæ²¡æœ‰ WiFi æ¨¡å—ï¼Œæ‰€ä»¥&lt;span class=&#34;spoiler&#34; title=&#34;ä½ çŸ¥é“çš„å¤ªå¤šäº†&#34;
  &gt;èŠ±é’±&lt;/span
&gt;ç»™äº†ä¸ª&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;8&#34; src=&#34;https://mooody.me/posts/2023-01/visionfive-2-oobe/08.usb-wifi.png&#34;&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;[383047.947883] usb 1-1.3: Product: 6600U
[383047.947904] usb 1-1.3: Manufacturer: ESWIN
[383047.947924] usb 1-1.3: SerialNumber: 6600U
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ä¸»çº¿å†…æ ¸æ”¯æŒæƒ…å†µ&#34;&gt;
  ä¸»çº¿å†…æ ¸æ”¯æŒæƒ…å†µ
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e4%b8%bb%e7%ba%bf%e5%86%85%e6%a0%b8%e6%94%af%e6%8c%81%e6%83%85%e5%86%b5&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;åŸºæœ¬æ²¡æœ‰ï¼š&lt;a href=&#34;https://wiki.rvspace.org/en/project/JH7110_Upstream_Plan&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://wiki.rvspace.org/en/project/JH7110_Upstream_Plan&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£…-arch&#34;&gt;
  å®‰è£… Arch
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%ae%89%e8%a3%85-arch&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆéœ€è¦ä¸€å¼  SD å¡ï¼ˆU-boot ä¼¼ä¹ä¸èƒ½ç›´æ¥ä» NVMe å¼•å¯¼ï¼‰&lt;/li&gt;
&lt;li&gt;æ ‡å‡† Arch å®‰è£…æµç¨‹&lt;/li&gt;
&lt;li&gt;ç„¶åå¡åœ¨äº† init
&lt;img alt=&#34;init-stuck&#34; src=&#34;https://mooody.me/posts/2023-01/visionfive-2-oobe/09.init-stuck.png&#34;&gt;
å†ä¹Ÿèµ·ä¸æ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸå› å…¶å®å¾ˆç®€å•ï¼Œå¯¹åº”çš„ä»£ç åœ¨ Arch Kernel é‡Œæ²¡æœ‰ï¼Œä¸è¿‡è¿™ä¸€ç‚¹æ˜¯ä¹‹åæ‰æ„è¯†åˆ°çš„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å®˜æ–¹-debian-å†…æ ¸&#34;&gt;
  å®˜æ–¹ Debian å†…æ ¸
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%ae%98%e6%96%b9-debian-%e5%86%85%e6%a0%b8&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;äºæ˜¯ç›®å…‰è½¬å‘äº†â€œStarFive å®˜æ–¹â€å‘å¸ƒçš„ Debian å†…æ ¸ï¼Œæ›¿æ¢å¥½ kernel å’Œ initrd ä¹‹åå¼€æœºï¼Œå‘ç°å¯ä»¥æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ï¼Œå› ä¸º initrd é‡Œçš„æ¨¡å—æœ‰é™ï¼Œè€Œ rootfs æ˜¯ Archï¼ŒDebian å†…æ ¸éœ€è¦çš„å„ç§æ¨¡å—ï¼ˆå¦‚ &lt;code&gt;btrfs&lt;/code&gt; æ— æ³•è¢«æ­£ç¡®åŠ è½½ï¼‰&lt;/p&gt;
&lt;p&gt;è¿™ç›´æ¥å¯¼è‡´ btrfs äººç”¨ä¸äº† btrfsï¼‰&lt;/p&gt;
&lt;h2 id=&#34;è‡ªè¡Œç¼–è¯‘å†…æ ¸&#34;&gt;
  è‡ªè¡Œç¼–è¯‘å†…æ ¸
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e8%87%aa%e8%a1%8c%e7%bc%96%e8%af%91%e5%86%85%e6%a0%b8&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æŒ‰ç†æ¥è¯´åº”è¯¥æ˜¯å¾ˆç®€å•çš„â€¦â€¦&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸Šæ¸¸ config æŠ„è¿‡æ¥&lt;/li&gt;
&lt;li&gt;æ›¿æ¢ä¸€ä¸‹ Arch çš„ PKGBUILD&lt;/li&gt;
&lt;li&gt;æœ€å makepkg&lt;/li&gt;
&lt;li&gt;å†æœ€å pacman -U &amp;hellip;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é¦–å…ˆå°±é‡åˆ°äº†å†…æ ¸ç¼–è¯‘å¤±è´¥â€¦â€¦ï¼ˆè¯´å®è¯å’±ä¹Ÿä¸ç¡®å®šè¿™ä¸ªåˆ†æ”¯å¯¹ä¸å¯¹ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/starfive-tech/linux/blob/JH7110_VisionFive2_devel/drivers/gpu/drm/i2c/tda998x_pin.c#L33&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/starfive-tech/linux/blob/JH7110_VisionFive2_devel/drivers/gpu/drm/i2c/tda998x_pin.c#L33&lt;/a&gt;f&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f55&#34;&gt;-MODULE_DEVICE_TABLE(of, starfive_drm_dt_ids);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f55&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#50fa7b;font-weight:bold&#34;&gt;+MODULE_DEVICE_TABLE(of, tda998x_rgb_dt_ids);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¿®å¥½è¿™ä¸ªé—®é¢˜ä»¥åï¼Œ&lt;del&gt;å°±é‡åˆ°äº†æ›´å¤šé—®é¢˜&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;æ–°ç‰ˆ pahole æ”¹äº†è¡Œä¸ºï¼Œç¼–è¯‘æ—§ç‰ˆ Kernel éœ€è¦åŠ ä¸€äº› flagsï¼š&lt;a href=&#34;https://github.com/torvalds/linux/commit/9741e07ece7c#diff-d801ca7968dc54e8304d53e0448d55f59098daf387330f030e6099e4283fcf96L43-R43&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/torvalds/linux/commit/9741e07ece7c#diff-d801ca7968dc54e8304d53e0448d55f59098daf387330f030e6099e4283fcf96L43-R43&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸Šæ¸¸é»˜è®¤é…ç½®æŠŠç½‘å¡é©±åŠ¨è®¾ç½®æˆäº† &lt;code&gt;y&lt;/code&gt;ï¼Œæˆ‘ä¸€å¼€å§‹&lt;span class=&#34;spoiler&#34; title=&#34;ä½ çŸ¥é“çš„å¤ªå¤šäº†&#34;
  &gt;ä¸çŸ¥é“ä¸ºå•¥&lt;/span
&gt;ï¼Œæ”¹æˆäº† &lt;code&gt;m&lt;/code&gt; å¯¼è‡´ç½‘å¡é©±åŠ¨
æ— æ³•è‡ªåŠ¨åŠ è½½ï¼Œå°†å…¶æ”¹å› &lt;code&gt;y&lt;/code&gt; åç»ˆäºèƒ½æ­£å¸¸ä½¿ç”¨äº†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-env&#34; data-lang=&#34;env&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;moody@MoodyVF2 ~&amp;gt; zgrep STARFIVE /proc/config.gz
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SOC_STARFIVE&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# CONFIG_SOC_STARFIVE_VIC7100 is not set&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SOC_STARFIVE_JH7110&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_DWMAC_STARFIVE_PLAT&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y &lt;span style=&#34;color:#6272a4&#34;&gt;# &amp;lt;&amp;lt;============ å°±æ˜¯è¿™ä¸ª&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# CONFIG_HW_RANDOM_STARFIVE is not set&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SPI_PL022_STARFIVE&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_PINCTRL_STARFIVE&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_PINCTRL_STARFIVE_JH7110&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_GPIO_STARFIVE_JH7110&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_STARFIVE_WATCHDOG&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_REGULATOR_STARFIVE_JH7110&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_STARFIVE_INNO_HDMI&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_STARFIVE_DSI&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SND_SOC_STARFIVE&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SND_SOC_STARFIVE_PWMDAC&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SND_SOC_STARFIVE_PWMDAC_PCM&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SND_SOC_STARFIVE_I2S&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SND_SOC_STARFIVE_PDM&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SND_SOC_STARFIVE_TDM&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SND_SOC_STARFIVE_SPDIF&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_SND_SOC_STARFIVE_SPDIF_PCM&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_USB_CDNS3_STARFIVE&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_MMC_DW_STARFIVE&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_RTC_DRV_STARFIVE&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_DW_AXI_DMAC_STARFIVE&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_CLK_STARFIVE_JH7110&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_CLK_STARFIVE_JH7110_VOUT&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_CLK_STARFIVE_JH7110_ISP&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_CLK_STARFIVE_JH7110_PLL&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_STARFIVE_TIMER&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_STARFIVE_MBOX&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;m
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_STARFIVE_MBOX_TEST&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;m
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_STARFIVE_PMU&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_PWM_STARFIVE_PTC&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_RESET_STARFIVE_JH7110&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;CONFIG_RISCV_STARFIVE_CPUFREQ&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;y
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è‡³äº Linux Kernel åªè®¤å‡ºäº† 4GB å†…å­˜çš„é—®é¢˜ï¼Œç›®å‰è¿˜æ²¡è§åˆ°å…¶ä»–çš„è§£æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å¹²è„†ç›´æ¥æ”¹äº† dtbï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;memory@40000000 {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    device_type = &amp;#34;memory&amp;#34;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f55&#34;&gt;-    reg = &amp;lt;0x00 0x40000000 0x01 0x00&amp;gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f55&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#50fa7b;font-weight:bold&#34;&gt;+    reg = &amp;lt;0x00 0x40000000 0x02 0x00&amp;gt;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#50fa7b;font-weight:bold&#34;&gt;&lt;/span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¹‹å &lt;code&gt;make dtbs&lt;/code&gt; é‡æ–°ç”Ÿæˆäº† dtb å¹¶æ”¾åˆ°å¯¹åº”ä½ç½®&lt;/p&gt;
&lt;h2 id=&#34;æˆæœå±•ç¤º&#34;&gt;
  æˆæœå±•ç¤º
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e6%88%90%e6%9e%9c%e5%b1%95%e7%a4%ba&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;h3 id=&#34;neofetch&#34;&gt;
  neofetch
  &lt;a class=&#34;heading-link&#34; href=&#34;#neofetch&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;                   -`                    moody@MoodyVF2
                  .o+`                   --------------
                 `ooo/                   OS: Arch Linux riscv64
                `+oooo:                  Host: StarFive VisionFive V2
               `+oooooo:                 Kernel: 5.15.0-3-vf2
               -+oooooo+:                Uptime: 4 days, 12 hours, 37 mins
             `/:-:++oooo+:               Packages: 319 (pacman)
            `/++++/+++++++:              Shell: fish 3.6.0
           `/++++++++++++++:             Terminal: /dev/pts/0
          `/+++ooooooooooooo/`           CPU: (4) @ 1.500GHz
         ./ooosssso++osssssso+`          Memory: 196MiB / 7885MiB
        .oossssso-````/ossssss+`
       -osssssso.      :ssssssso.
      :osssssss/        osssso+++.
     /ossssssss/        +ssssooo/-
   `/ossssso+/:-        -:/+osssso+-
  `+sso+:-`                 `.-/+oso:
 `++:.                           `-/+/
 .`                                 `/
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;uname--a&#34;&gt;
  uname -a
  &lt;a class=&#34;heading-link&#34; href=&#34;#uname--a&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;Linux MoodyVF2 5.15.0-3-vf2 #1 SMP PREEMPT Wed, 25 Jan 2023 18:44:54 +0000 riscv64 GNU/Linux
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;free--h&#34;&gt;
  free -h
  &lt;a class=&#34;heading-link&#34; href=&#34;#free--h&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;               total        used        free      shared  buff/cache   available
Mem:           7.7Gi       191Mi       7.1Gi       2.0Mi       391Mi       7.3Gi
Swap:           25Gi          0B        25Gi
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;lscpu&#34;&gt;
  lscpu
  &lt;a class=&#34;heading-link&#34; href=&#34;#lscpu&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;Architecture:          riscv64
  Byte Order:          Little Endian
CPU(s):                4
  On-line CPU(s) list: 0-3
NUMA:
  NUMA node(s):        1
  NUMA node0 CPU(s):   0-3
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;cat-proccpuinfo&#34;&gt;
  cat /proc/cpuinfo
  &lt;a class=&#34;heading-link&#34; href=&#34;#cat-proccpuinfo&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;processor   : 0
hart        : 1
isa     : rv64imafdc
mmu     : sv39
isa-ext     :
uarch       : sifive,u74-mc
...
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;lspci--v&#34;&gt;
  lspci -v
  &lt;a class=&#34;heading-link&#34; href=&#34;#lspci--v&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;0000:00:00.0 PCI bridge: PLDA XpressRich-AXI Ref Design (rev 02) (prog-if 00 [Normal decode])
        Flags: bus master, fast devsel, latency 0, IRQ 58
        Bus: primary=00, secondary=01, subordinate=01, sec-latency=0
        Memory behind bridge: 30000000-300fffff [size=1M] [32-bit]
        Capabilities: &amp;lt;access denied&amp;gt;
        Kernel driver in use: pcieport

0000:01:00.0 USB controller: VIA Technologies, Inc. VL805/806 xHCI USB 3.0 Controller (rev 01) (prog-if 30 [XHCI])
        Subsystem: VIA Technologies, Inc. VL805/806 xHCI USB 3.0 Controller
        Flags: bus master, fast devsel, latency 0, IRQ 66
        Memory at 30000000 (64-bit, non-prefetchable) [size=4K]
        Capabilities: &amp;lt;access denied&amp;gt;
        Kernel driver in use: xhci_hcd
        Kernel modules: xhci_pci

0001:00:00.0 PCI bridge: PLDA XpressRich-AXI Ref Design (rev 02) (prog-if 00 [Normal decode])
        Flags: bus master, fast devsel, latency 0, IRQ 60
        Bus: primary=00, secondary=01, subordinate=01, sec-latency=0
        Memory behind bridge: 38000000-380fffff [size=1M] [32-bit]
        Capabilities: &amp;lt;access denied&amp;gt;
        Kernel driver in use: pcieport

0001:01:00.0 Non-Volatile memory controller: Micron/Crucial Technology P2 NVMe PCIe SSD (rev 01) (prog-if 02 [NVM Express])
        Subsystem: Micron/Crucial Technology Device 5021
        Flags: bus master, fast devsel, latency 0, IRQ 59, NUMA node 0
        Memory at 38000000 (64-bit, non-prefetchable) [size=16K]
        Capabilities: &amp;lt;access denied&amp;gt;
        Kernel driver in use: nvme
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;lsusb--t&#34;&gt;
  lsusb -t
  &lt;a class=&#34;heading-link&#34; href=&#34;#lsusb--t&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;/:  Bus 02.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/4p, 5000M
/:  Bus 01.Port 1: Dev 1, Class=root_hub, Driver=xhci_hcd/1p, 480M
    |__ Port 1: Dev 2, If 0, Class=Hub, Driver=hub/4p, 480M
&lt;/code&gt;&lt;/pre&gt;</description>
    </item>
    
    <item>
      <title>ä¸ Wayland çš„ç¬¬ N&#43;2 æ¬¡äº²å¯†äº’åŠ¨</title>
      <link>https://mooody.me/posts/2022-10/me-vs-wayland-2/</link>
      <pubDate>Tue, 04 Oct 2022 00:00:00 +0000</pubDate>
      
      <guid>https://mooody.me/posts/2022-10/me-vs-wayland-2/</guid>
      <description>&lt;h1 id=&#34;åˆä¸€ç¯‡-wayland-æ°´æ–‡&#34;&gt;
  åˆä¸€ç¯‡ Wayland æ°´æ–‡
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%8f%88%e4%b8%80%e7%af%87-wayland-%e6%b0%b4%e6%96%87&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;ä» X11 ï¼ˆå†æ¬¡ï¼‰è¿ç§»åˆ° Wayland å·²ç»ä¸¤ä¸‰å‘¨äº†ï¼Œè¿™æ¬¡æ˜¯çœŸçš„ä¸æ„¿å›å»äº†&lt;/p&gt;
&lt;h2 id=&#34;ç›¸æ¯”äºä¸Šæ¬¡çš„æ›´æ–°&#34;&gt;
  ç›¸æ¯”äºä¸Šæ¬¡çš„æ›´æ–°
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e7%9b%b8%e6%af%94%e4%ba%8e%e4%b8%8a%e6%ac%a1%e7%9a%84%e6%9b%b4%e6%96%b0&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;krunner ä¸ä¼šè«åå…¶å¦™æ— æ³•å¯åŠ¨äº†&lt;/li&gt;
&lt;li&gt;å¾®ä¿¡å·²ç»å¯ä»¥ä» Wayland ä¸‹çš„ Dolphin æ‹–åŠ¨æ–‡ä»¶åˆ°èŠå¤©çª—å£äº†ï¼ˆä¸çŸ¥é“æ˜¯ wine è¿˜æ˜¯ KDE çš„ creditï¼‰&lt;/li&gt;
&lt;li&gt;VSCode / VMWare å±å¹•ä¸ä¼šé—ªçƒäº†&lt;/li&gt;
&lt;li&gt;Global Application Menu å·²ç»å¯ä»¥ä½¿ç”¨ Meta é”®è°ƒå‡º&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;wayland-ä¸‹çš„å…¶ä»–é—®é¢˜&#34;&gt;
  Wayland ä¸‹çš„å…¶ä»–é—®é¢˜
  &lt;a class=&#34;heading-link&#34; href=&#34;#wayland-%e4%b8%8b%e7%9a%84%e5%85%b6%e4%bb%96%e9%97%ae%e9%a2%98&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;latte-dock å·²ç»ä¸åƒä¹‹å‰é‚£æ ·æ— æ³•å¯åŠ¨äº†ï¼Œä½†å¶å°”ä¼šå‡ºç° coredumpï¼Œç›®å‰è¿˜ä¸çŸ¥é“åŸå› &lt;/li&gt;
&lt;li&gt;Flameshot ä»ç„¶æ— æ³•æˆªå›¾&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä»¥åŠå°è®°ä¸€æ¬¡-debug-kwin&#34;&gt;
  ä»¥åŠâ€¦â€¦å°è®°ä¸€æ¬¡ debug kwin
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e4%bb%a5%e5%8f%8a%e5%b0%8f%e8%ae%b0%e4%b8%80%e6%ac%a1-debug-kwin&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æˆ‘çš„å±å¹•å¸ƒå±€:&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;screen_layout&#34; src=&#34;https://mooody.me/posts/2022-10/me-vs-wayland-2/screen-layout.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºæ–¹ä¾¿èµ·è§ï¼Œå°†å±å¹•ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡ç¼–å·ä¸º 1ã€2ã€3ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ASUSTek: 1&lt;/li&gt;
&lt;li&gt;Arzopa 4K: 2&lt;/li&gt;
&lt;li&gt;å†…ç½®å±: 3&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸Šå›¾å¯è§ Arzopa å±å¹•æ˜¯é«˜åˆ†å±ï¼Œè‡ªä»åˆ‡æ¢åˆ° Wayland åæˆ‘åœ¨ KDE çš„è®¾ç½®ä¸­å°†å…¶ç¼©æ”¾ä¸º 200%ã€‚ä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜ï¼Œè§ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;screen-border&#34; src=&#34;https://mooody.me/posts/2022-10/me-vs-wayland-2/screen-border.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;åªæœ‰ Qt çª—å£åœ¨æ·±çº¢è‰²åŒºåŸŸæ—¶ï¼Œæ‰ä¼šè¢«ç»˜åˆ¶ä¸º HiDPI çš„æ ·å­ï¼Œè€Œåœ¨å·¦ä¸‹è§’åŒºåŸŸï¼ˆä½†å¹¶æœªå‡ºå±å¹•èŒƒå›´ï¼‰çš„çª—å£åˆ™ä¼šä½¿ç”¨ 1080p æ¸²æŸ“ï¼Œå¹¶è¿›è¡Œ 2x ç¼©æ”¾ï¼Œå¯¼è‡´æ¨¡ç³Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;å®šä½é—®é¢˜&#34;&gt;
  å®šä½é—®é¢˜
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%ae%9a%e4%bd%8d%e9%97%ae%e9%a2%98&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;é¦–å…ˆæˆ‘ä½¿ç”¨çš„æ˜¯ Qt ä¸ GTK ç¨‹åºæ¸²æŸ“çš„å¯¹æ¯”ï¼Œå‘ç°åªæœ‰ Qt ç¨‹åºä¼šåœ¨ã€Œçª—å£å®Œå…¨è¿›å…¥é«˜åˆ†å±åã€æ‰ä½¿ç”¨ HiDPI æ¸²æŸ“ã€‚ç›¸æ¯”ä¹‹ä¸‹ GTK ç¨‹åºçš„è¡Œä¸ºæ˜¯ï¼šåªè¦
çª—å£çš„ä»»æ„ä¸€éƒ¨åˆ†è¿›å…¥é«˜åˆ†å±ï¼Œå°±ä¼šä½¿ç”¨ HiDPI æ¸²æŸ“ï¼Œå…¶ä»–æœªåœ¨é«˜åˆ†å±ä¸Šçš„éƒ¨åˆ†ï¼Œä»ç„¶ä½¿ç”¨ HiDPI æ¸²æŸ“ï¼Œä½†è¿›è¡Œ down scaleã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘é¦–å…ˆæ€€ç–‘æ˜¯ Qt çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡ä»ä¸“ä¸šç¾¤å‹ c10s å¤„è¿›è¡Œæ·±åº¦å­¦ä¹ åï¼Œæˆ‘å¾—çŸ¥äº†å¯ä»¥ä½¿ç”¨ &lt;code&gt;WAYLAND_DEBUG=1&lt;/code&gt; æ¥å¼€å¯ Wayland çš„ debug ä¿¡æ¯ã€‚äºæ˜¯å…ˆä½¿ç”¨
&lt;code&gt;WAYLAND_DEBUG=1 konsole&lt;/code&gt; å¯¹ Konsole çª—å£è¿›è¡Œ debugã€‚&lt;/p&gt;
&lt;p&gt;éšåæˆ‘å‘ç°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;wl_output-border&#34; src=&#34;https://mooody.me/posts/2022-10/me-vs-wayland-2/wl_output-border.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šä»…åˆ—å‡ºäº†éƒ¨åˆ†è¾¹ç•Œå¤„çš„ wayland ä¿¡æ¯ï¼Œ&lt;del&gt;é—®å·å¤„ä¸é‡è¦&lt;/del&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ï¼šï¼ˆæ•°å­—ä»£è¡¨ &lt;code&gt;wl_output&lt;/code&gt; åŒºåŸŸï¼Œç†è®ºä¸Š &lt;code&gt;wl_output&lt;/code&gt; ä»£è¡¨ä¸€ä¸ªå±å¹•ï¼‰&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;&lt;em&gt;N&lt;/em&gt;&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;+ 1&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;+ 2&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;+ 3&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;+ 4&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;+ 5&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;+ 6&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;00&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¦» 1&lt;/td&gt;
&lt;td&gt;è¿› 1&lt;/td&gt;
&lt;td&gt;è¿› 1&lt;/td&gt;
&lt;td&gt;ç¦» 1&lt;/td&gt;
&lt;td&gt;ç¦» 3 / è¿› 2&lt;/td&gt;
&lt;td&gt;ç¦» 2 / è¿› 3&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;06&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;ç¦» 1&lt;/td&gt;
&lt;td&gt;è¿› 1&lt;/td&gt;
&lt;td&gt;è¿› 1&lt;/td&gt;
&lt;td&gt;ç¦» 1&lt;/td&gt;
&lt;td&gt;ç¦» 2&lt;/td&gt;
&lt;td&gt;è¿› 2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;12&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;è¿› 1&lt;/td&gt;
&lt;td&gt;ç¦» 1&lt;/td&gt;
&lt;td&gt;ç¦» 3&lt;/td&gt;
&lt;td&gt;è¿› 3&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ ¹æ®ä¸Šè¡¨ç°è±¡è®¡ç®—ï¼Œä¼šå¾—å‡ºä¸€äº›å¾ˆæœ‰æ„æ€çš„ç°è±¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;14ã€15 åŒºåŸŸå†…ï¼Œçª—å£ä¸å±äºä»»ä½•å±å¹•ï¼ˆè¿™ä¸åº”è¯¥ï¼‰&lt;/li&gt;
&lt;li&gt;2ã€3ã€12 åŒºåŸŸå†…ï¼Œçª—å£å±äº 1ã€2 ä¸¤ä¸ªå±å¹•ï¼ˆè¿™ä¹Ÿä¸åº”è¯¥ï¼‰&lt;/li&gt;
&lt;li&gt;8ã€9 å°çŸ©å½¢åŒºåŸŸå†…ï¼Œçª—å£å±äº 1ã€3 ä¸¤ä¸ªå±å¹•ï¼ˆè¿™æ›´ä¸åº”è¯¥ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”±æ­¤å¯è§ï¼ŒWayland æ··æˆå™¨å‘é€çš„æ˜¯é”™è¯¯çš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡è¾¹ç•Œçš„å¤§æ¦‚ä½ç½®å¯ä»¥çœ‹å‡ºï¼škwin åœ¨åˆ¤æ–­çª—å£ä¸å±å¹• intersection æ—¶ç–‘ä¼¼å¿˜è®°è®¡ç®—å±å¹•æœå‘äº†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¿®å¤é—®é¢˜&#34;&gt;
  ä¿®å¤é—®é¢˜
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e4%bf%ae%e5%a4%8d%e9%97%ae%e9%a2%98&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;é‚å†™äº†&lt;a href=&#34;https://invent.kde.org/moodyhunter/kwin/-/commit/6ee442d1d1b5b70e3e06a7528d470c4ea1537042&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤ patch&lt;/a&gt;ï¼Œåœ¨è®¡ç®—
&lt;code&gt;Display::outputsIntersecting(const QRect &amp;amp;rect)&lt;/code&gt; æ—¶è€ƒè™‘å±å¹•æœå‘ã€‚&lt;/p&gt;
&lt;p&gt;ç»è¿‡æ­¤ patch åï¼Œé—®é¢˜å¾—åˆ°äº†ä¿®å¤ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åç»­&#34;&gt;
  åç»­
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%90%8e%e7%bb%ad&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;å‘ç° kwin ä¸Šæ¸¸å·²ç»åœ¨ master åˆ†æ”¯æäº¤äº†æ­¤é—®é¢˜çš„æ›´åˆç†ä¿®å¤ï¼š&lt;a href=&#34;https://invent.kde.org/plasma/kwin/-/commit/25466f9546dc9a2752708f4b1216088f1f0b7ef3&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;commit 1&lt;/a&gt;
å’Œ &lt;a href=&#34;https://invent.kde.org/plasma/kwin/-/commit/ed49d7c59bb3cc0983d2fe86973aaf8169266e1a?page=2#1120118b5c63d781de321067fb32acbd40cbc74f_315_283&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;commit 2&lt;/a&gt;ï¼Œ
ä½†ä»æœª releaseã€å¤–åŠ æ”¹åŠ¨è¿‡å¤šï¼Œç›®å‰ä¸´æ—¶ä½¿ç”¨äº†æˆ‘è‡ªå·±çš„ patchã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä¸ Wayland çš„ç¬¬ N&#43;1 æ¬¡äº²å¯†äº’åŠ¨ï¼ˆé€€å‘é‡åˆ¶ç‰ˆï¼‰</title>
      <link>https://mooody.me/posts/2022-07/me-vs-wayland-revisited/</link>
      <pubDate>Mon, 04 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>https://mooody.me/posts/2022-07/me-vs-wayland-revisited/</guid>
      <description>&lt;h1 id=&#34;æˆ‘ä¹Ÿæ˜¯-wayland-ç”¨æˆ·äº†-é€€äº†è°¢è°¢&#34;&gt;
  &lt;del&gt;æˆ‘ä¹Ÿæ˜¯ Wayland ç”¨æˆ·äº†ï¼&lt;/del&gt; é€€äº†è°¢è°¢
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e6%88%91%e4%b9%9f%e6%98%af-wayland-%e7%94%a8%e6%88%b7%e4%ba%86-%e9%80%80%e4%ba%86%e8%b0%a2%e8%b0%a2&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;../me-vs-wayland//&#34; &gt;å°±åœ¨ä¸‰å¤©ä¹‹å‰ï¼Œâ€¦â€¦&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;?&#34; src=&#34;https://mooody.me/posts/2022-07/me-vs-wayland-revisited/bye-from-copilot.png&#34;&gt;&lt;/p&gt;
&lt;span class=&#34;spoiler&#34; title=&#34;ä½ çŸ¥é“çš„å¤ªå¤šäº†&#34;
  &gt;æˆ‘å°±é€€äº†è°¢è°¢ã€‚&lt;/span
&gt;
&lt;p&gt;åœ¨åˆ‡æ¢åˆ° Wayland å‰ï¼Œæˆ‘å¯¹ä»–å……æ»¡äº†æ»¡å¿ƒæ†§æ†¬ï¼Œå› ä¸ºæˆ‘æœ‰ä¸ª 4K å±å¹•è€Œ X11 ä¸‹ï¼ˆä¼¼ä¹ï¼‰å¯¹å¤šå±ä¸åŒ DPI çš„æ”¯æŒä¸æ˜¯å¾ˆå¥½ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªä» 2021 å¹´åº•å·¦å³ï¼Œæˆ‘å°±ä¸€æ¬¡åˆä¸€æ¬¡åœ°åˆ‡æ¢åˆ° Wayland è¿›è¡Œä½“éªŒï¼Œå³ä½¿æ¯æ¬¡éƒ½æœ‰ä¸€äº›æ–°çš„ bug è¢«ä¿®å¤ï¼Œä½†å½“æ—¶çš„æ•´ä½“æ„Ÿè§‰ä»ç„¶ä¸å¥½ã€‚&lt;/p&gt;
&lt;p&gt;ç›´åˆ°å‰å‡ å¤©ï¼ˆå››å¤©å‰ï¼‰æˆ‘åˆä¸€æ¬¡å°è¯• Waylandï¼Œç¬¬ä¸€å¤©ä¸‹æ¥ï¼Œè™½ç„¶ä½“éªŒåˆ°äº†ä¸€äº› glitchï¼Œä½†æ•´ä½“è¿˜ç®—å¯ä»¥æ¥å—ã€‚Wayland å¸¦æ¥çš„ 4K é«˜åˆ†å±æ”¯æŒã€é«˜åˆ·æ–°ç‡æ”¯æŒéƒ½æ˜¯é¡¶çº§çš„åŠ åˆ†é¡¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é€€å‘&#34;&gt;
  é€€å‘
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e9%80%80%e5%9d%91&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä½†ä»ç¬¬äºŒå¤©å¼€å§‹ï¼Œå„ç§å„æ ·çš„é—®é¢˜å°±æµ®ç°å‡ºæ¥ï¼š&lt;/p&gt;
&lt;h3 id=&#34;vscode-æ— æ³•ä½¿ç”¨è¾“å…¥æ³•&#34;&gt;
  VSCode æ— æ³•ä½¿ç”¨è¾“å…¥æ³•
  &lt;a class=&#34;heading-link&#34; href=&#34;#vscode-%e6%97%a0%e6%b3%95%e4%bd%bf%e7%94%a8%e8%be%93%e5%85%a5%e6%b3%95&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;æˆ‘è¦å†™ blog å•Šï¼Œæ²¡æœ‰ä¸­æ–‡è¾“å…¥æ³•æ€ä¹ˆè¡Œï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸŠï¼šæ€ä¹ˆç”¨ä¸äº†è¾“å…¥æ³•&lt;/p&gt;
&lt;p&gt;Ianï¼šozone&lt;/p&gt;
&lt;p&gt;ğŸŠï¼šæ‰€ä»¥æ€ä¹ˆåŠ&lt;/p&gt;
&lt;p&gt;Ianï¼šåœ¨åˆ«çš„åœ°æ–¹è¾“å…¥ï¼Œç„¶å cut paste&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Chromium ä¸Šæ¸¸çš„ &lt;a href=&#34;https://chromium-review.googlesource.com/c/chromium/src/&amp;#43;/3015331&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;text_input_manager_v3&lt;/code&gt; æ”¯æŒ&lt;/a&gt;
Code Review ä»ç„¶åœ¨è¿›è¡Œä¸­ï¼Œå°šæœªåˆå¹¶ã€‚å› æ­¤ä¸‹æ¸¸ç”µå­åƒåœ¾ä»¬åªèƒ½æ…¢æ…¢ç­‰ç€ï¼ˆæˆ–è€… XWaylandï¼‰ã€‚ç›´æ¥å¯¼è‡´ Chromium / Chrome / VSCode åœ¨
native Wayland ç¯å¢ƒä¸‹æ ¹æœ¬æ— æ³•ä½¿ç”¨è¾“å…¥æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šChromium / Chrome å¯ä»¥é€šè¿‡ä½¿ç”¨ &lt;code&gt;--gtk-version=4&lt;/code&gt; å¯ç”¨ GTK4ï¼Œé€šè¿‡æ„é€ ä¸€ä¸ªå‡çš„ï¼ˆæ²¡é”™ï¼‰GTK çª—å£è¿›è¡Œ &amp;ldquo;ä¼ªé€ &amp;rdquo; è¾“å…¥æ³•æ”¯æŒ&lt;/p&gt;
&lt;p&gt;æœ‰å…³è¾“å…¥æ³•çš„æ›´å¤šå†…å®¹ï¼Œè¯·æˆ³ &lt;a href=&#34;https://www.csslayer.info/wordpress/fcitx-dev/chrome-state-of-input-method-on-wayland/&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Chrome/Chromium ä»Šæ—¥ Wayland è¾“å…¥æ³•æ”¯æŒç°çŠ¶&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆå†…å®¹å¼•ç”¨äº 2022 å¹´ 7 æœˆï¼Œå±Šæ—¶å¯èƒ½ä¼šæ›´æ–°ï¼Œè¯·ç•™æ„ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;krunner-ç»å¸¸æ€§æ— æ³•è°ƒå‡º&#34;&gt;
  KRunner ç»å¸¸æ€§æ— æ³•è°ƒå‡º
  &lt;a class=&#34;heading-link&#34; href=&#34;#krunner-%e7%bb%8f%e5%b8%b8%e6%80%a7%e6%97%a0%e6%b3%95%e8%b0%83%e5%87%ba&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä¸çŸ¥é“ä»€ä¹ˆåŸå› ã€‚åœ¨ç»è¿‡ä¸€æ®µæ—¶é—´ä¹‹åï¼Œæˆ‘å°±æ— æ³•ä½¿ç”¨ &lt;code&gt;Alt + Space&lt;/code&gt; å‘¼å‡º KRunnerã€‚&lt;br&gt;
æœ¬äººæ˜¯ KRunner é‡åº¦ç”¨æˆ·ï¼Œæ¯æ¬¡å‡ºç°è¿™ç§æƒ…å†µåéœ€è¦ä½¿ç”¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;systemctl --user restart plasma-krunner.service
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é‡å¯æœåŠ¡æ‰èƒ½é‡æ–°æ¢å¤æ­£å¸¸ï¼Œä½†è¿‡ä¸€æ®µæ—¶é—´ä¹‹åï¼Œé—®é¢˜ä»ä¼šå‡ºç°ã€‚&lt;/p&gt;
&lt;p&gt;Such a bummer.&lt;/p&gt;
&lt;h3 id=&#34;global-application-menu-æ— æ³•ä½¿ç”¨-meta-é”®hahahugoshortcode18s1hbhbæ‰“å¼€&#34;&gt;
  Global Application Menu æ— æ³•ä½¿ç”¨ Meta é”®&lt;span class=&#34;spoiler&#34; title=&#34;ä½ çŸ¥é“çš„å¤ªå¤šäº†&#34;
  &gt;ï¼ˆWindows å¾½æ ‡é”®ï¼‰&lt;/span
&gt;æ‰“å¼€
  &lt;a class=&#34;heading-link&#34; href=&#34;#global-application-menu-%e6%97%a0%e6%b3%95%e4%bd%bf%e7%94%a8-meta-%e9%94%aehahahugoshortcode18s1hbhb%e6%89%93%e5%bc%80&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;åŒæ ·æ˜¯ä¸ªä¸çŸ¥é“ä»€ä¹ˆåŸå› çš„é—®é¢˜ã€‚æ— æ³•è¿›è¡Œæ›´å¤šçš„åˆ†æã€‚&lt;/p&gt;
&lt;h3 id=&#34;flameshot-æ— æ³•æ­£å¸¸ä½¿ç”¨&#34;&gt;
  Flameshot æ— æ³•æ­£å¸¸ä½¿ç”¨
  &lt;a class=&#34;heading-link&#34; href=&#34;#flameshot-%e6%97%a0%e6%b3%95%e6%ad%a3%e5%b8%b8%e4%bd%bf%e7%94%a8&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;è™½ç„¶è¯´å¯ä»¥ä¸ç”¨ Flameshotï¼Œä½†å·²ç»ä¹ æƒ¯äº†ä»–çš„ annotationï¼Œæ¢ç”¨ Spectacle è¿˜æ˜¯æŒºä¸é€‚åº”çš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;latte-dock-å½»åº•æ— æ³•å¯åŠ¨&#34;&gt;
  Latte Dock å½»åº•æ— æ³•å¯åŠ¨
  &lt;a class=&#34;heading-link&#34; href=&#34;#latte-dock-%e5%bd%bb%e5%ba%95%e6%97%a0%e6%b3%95%e5%90%af%e5%8a%a8&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;åŒæ ·ï¼Œæˆ‘ä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œåœ¨ç»ˆç«¯æ·»åŠ  &lt;code&gt;-d&lt;/code&gt; debug è¾“å‡ºä¹Ÿå¹¶æ— æœ‰ç”¨çš„æ¶ˆæ¯ï¼Œgdb ç°å®ä¸ºåœ¨ &lt;code&gt;poll()&lt;/code&gt; ä½†æ²¡æ—¶é—´è°ƒæŸ¥å…·ä½“åœ¨ &lt;code&gt;poll&lt;/code&gt; ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;vscode--vmware-å±å¹•é—ªçƒ&#34;&gt;
  VSCode / VMWare å±å¹•é—ªçƒ
  &lt;a class=&#34;heading-link&#34; href=&#34;#vscode--vmware-%e5%b1%8f%e5%b9%95%e9%97%aa%e7%83%81&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä¿©é—­æºè½¯ä»¶ä¹Ÿæ²¡ä»€ä¹ˆå¥½è°ƒæŸ¥çš„&lt;/p&gt;
&lt;h3 id=&#34;wine-æ— æ³•æ‹–åŠ¨æ–‡ä»¶è¿›å‡º&#34;&gt;
  Wine æ— æ³•æ‹–åŠ¨æ–‡ä»¶è¿›å‡º
  &lt;a class=&#34;heading-link&#34; href=&#34;#wine-%e6%97%a0%e6%b3%95%e6%8b%96%e5%8a%a8%e6%96%87%e4%bb%b6%e8%bf%9b%e5%87%ba&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;å­—é¢æ„æ€ï¼Œæ— æ³•æ‹–åŠ¨æ–‡ä»¶è¿›å‡ºã€‚æˆ‘ä¸æ˜¯ wine å¼€å‘è€…ï¼Œæ•…è€Œä¹Ÿä¸çŸ¥é“ä»€ä¹ˆåŸå› ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¾£é¸¡å¾®ä¿¡&#34;&gt;
  è¾£é¸¡å¾®ä¿¡
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e8%be%a3%e9%b8%a1%e5%be%ae%e4%bf%a1&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;è¾£é¸¡å¾®ä¿¡æ— è®ºæ˜¯ wine Wayland ä¸‹è¿˜æ˜¯ wine X11 ä¸‹éƒ½ååˆ†éš¾ç”¨ï¼Œå¼ å°é¾™&lt;span class=&#34;spoiler&#34; title=&#34;ä½ çŸ¥é“çš„å¤ªå¤šäº†&#34;
  &gt;é˜–å®¶æ¬¢ä¹&lt;/span
&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è¯­&#34;&gt;
  ç»“è¯­
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e7%bb%93%e8%af%ad&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸Šå†…å®¹å‡ä¸ºæœ¬äººè§‚ç‚¹ï¼Œç”±äºæŠ€æœ¯æœ‰é™ï¼Œå¯èƒ½æ— æ³•æ­£ç¡®æ’é™¤æ‰€æœ‰é—®é¢˜ã€‚&lt;br&gt;
å¦‚æœæœ‰äººèƒ½æä¾›ä»¥ä¸Šé—®é¢˜çš„å…·ä½“åŸå› ï¼Œæˆ–è§£å†³åŠæ³•ï¼Œæ¬¢è¿ leave a commentï¼Œæˆ‘å°†æ„Ÿæ¿€ä¸å°½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¹‹å‰æˆ‘å¤§æ¦‚åªå¥½ Stuck with X11 äº†ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æˆ‘ä¸ Wayland çš„ç¬¬ N æ¬¡äº²å¯†äº’åŠ¨</title>
      <link>https://mooody.me/posts/2022-07/me-vs-wayland/</link>
      <pubDate>Fri, 01 Jul 2022 00:00:00 +0000</pubDate>
      
      <guid>https://mooody.me/posts/2022-07/me-vs-wayland/</guid>
      <description>&lt;h1 id=&#34;æˆ‘ä¹Ÿæ˜¯-wayland-ç”¨æˆ·äº†&#34;&gt;
  æˆ‘ä¹Ÿæ˜¯ Wayland ç”¨æˆ·äº†ï¼
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e6%88%91%e4%b9%9f%e6%98%af-wayland-%e7%94%a8%e6%88%b7%e4%ba%86&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;ä»Šå¤©ä» X11 è¿ç§»åˆ°äº† Waylandï¼Œæˆ‘ä¹Ÿæ˜¯ Wayland ç”¨æˆ·äº†ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æµæ°´å¸ ä¹‹ &#39;JasPer 3&#39;</title>
      <link>https://mooody.me/posts/2022-06/jasper3-crash-analysis/</link>
      <pubDate>Sat, 18 Jun 2022 13:10:07 +0100</pubDate>
      
      <guid>https://mooody.me/posts/2022-06/jasper3-crash-analysis/</guid>
      <description>&lt;h1 id=&#34;æ”¾å‡äº†&#34;&gt;
  &lt;strong&gt;æ”¾å‡äº†!&lt;/strong&gt;
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e6%94%be%e5%81%87%e4%ba%86&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h1&gt;
&lt;p&gt;&lt;del&gt;ç”±äº qmlls å´©æºƒäº†ä¸€æ•´å¤©ï¼Œæˆ‘ç»ˆäºæ”¾å¼ƒè°ƒæŸ¥äº†ï¼Œäºæ˜¯å¼€å§‹æ°´ç¾¤ï¼š&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;#archlinux-cn&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;CuiHao&lt;/strong&gt;: &lt;em&gt;æœ€è¿‘ Spectacle å’Œ Plasmashell åœ¨æˆªå›¾åç–¯ç‹‚ segfaultï¼Œæœ‰äººé‡åˆ°å—&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CuiHao&lt;/strong&gt;: &lt;code&gt;#4 0x00007fd47872e774 in jas_stream_putc_func () from /usr/lib/libjasper.so.6&lt;/code&gt; &lt;em&gt;Spactacle å´©è¿™å„¿äº†&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;hosiet&lt;/strong&gt;: &lt;em&gt;libjapser? ä¸ºå•¥ arch è¿˜åœ¨ç”¨è¿™ä¸ª&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CuiHao&lt;/strong&gt;: &lt;em&gt;&lt;a href=&#34;https://bugs.kde.org/show_bug.cgi?id=455362&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://bugs.kde.org/show_bug.cgi?id=455362&lt;/a&gt;&lt;/em&gt; &lt;em&gt;æ‰”äº†ä¸ª bugï¼Œä½†æ„Ÿè§‰æ˜¯ qt çš„ bug&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;csslayer&lt;/strong&gt;: &lt;em&gt;ä¸èƒ½ä¿®ä¸€ä¸‹å—ï¼Œæ˜¯ä¸æ˜¯ä»€ä¹ˆæ—¶å€™å°±å’Œ jasper ä¸å…¼å®¹äº†&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CuiHao&lt;/strong&gt;: &lt;em&gt;&lt;a href=&#34;https://bugreports.qt.io/browse/QTBUG-104398&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://bugreports.qt.io/browse/QTBUG-104398&lt;/a&gt; æŠ¥äº†åæ­£&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;del&gt;ä»”ç»†&lt;/del&gt;æŸ¥çœ‹ &lt;code&gt;QTBUG-104398&lt;/code&gt; åï¼Œæˆ‘ä¹Ÿåœ¨æœ¬åœ°æˆåŠŸç”¨ Qt 6.5 å¤ç°äº†è¿™ä¸ª crashï¼š&lt;/p&gt;
&lt;p&gt;é¦–å…ˆå†™ä¸€ä¸ª cpp&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;QCoreApplication&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;QImage&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;main&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; argc, &lt;span style=&#34;color:#8be9fd&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;argv[])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    QCoreApplication a(argc, argv);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    QImage image(&lt;span style=&#34;color:#bd93f9&#34;&gt;64&lt;/span&gt;, &lt;span style=&#34;color:#bd93f9&#34;&gt;64&lt;/span&gt;, QImage&lt;span style=&#34;color:#ff79c6&#34;&gt;::&lt;/span&gt;Format_Grayscale8);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    image.fill(&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    image.save(&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;test.jp2&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç„¶åå°è¯•ç¼–è¯‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;- &amp;gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;export&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;MY_QT_PATH&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$HOME&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;/Projects/qt/build/qtbase&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;~ &amp;gt; g++ ./main.cpp &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    -I &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$MY_QT_PATH&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;/include&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    -I &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$MY_QT_PATH&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;/include/QtCore&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    -I &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$MY_QT_PATH&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;/include/QtGui&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    -L &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$MY_QT_PATH&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;/lib&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    -lQt6Core &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    -lQt6Gui &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    -o &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;test&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿è¡Œå¹¶è¿›è¡Œçˆ†ç‚¸è§‚æµ‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;~ &amp;gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;LD_LIBRARY_PATH&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$MY_QT_PATH&lt;/span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;/lib&amp;#34;&lt;/span&gt; ./test
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;WARNING: YOUR CODE IS RELYING ON DEPRECATED FUNCTIONALITY IN THE JASPER
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;LIBRARY.  THIS FUNCTIONALITY WILL BE REMOVED IN THE NEAR FUTURE. PLEASE
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;FIX THIS PROBLEM BEFORE YOUR CODE STOPS WORKING.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;deprecation warning: use of jas_init is deprecated
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;warning: The application program did not &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;set&lt;/span&gt; the memory limit &lt;span style=&#34;color:#ff79c6&#34;&gt;for&lt;/span&gt; the
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;JasPer library.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;warning: The JasPer memory limit is being defaulted to a value that may be
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;inappropriate &lt;span style=&#34;color:#ff79c6&#34;&gt;for&lt;/span&gt; the system.  If the default is too small, some reasonable
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;encoding/decoding operations will fail.  If the default is too large, security
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vulnerabilities will result &lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;e.g., decoding a malicious image could
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;exhaust all memory and crash the system.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;warning: setting JasPer memory limit to &lt;span style=&#34;color:#bd93f9&#34;&gt;16715984896&lt;/span&gt; bytes
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;fish: Job 1, &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#39;./test&amp;#39;&lt;/span&gt; terminated by signal SIGSEGV &lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;Address boundary error&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é¦–å…ˆæ˜ å…¥çœ¼å¸˜çš„å°±æ˜¯ä¸€ä¸²å¤§å†™çš„ &lt;code&gt;WARNING&lt;/code&gt;ï¼š&amp;ldquo;ä½ çš„ä»£ç ç”¨äº†è€æ—§ APIï¼Œè¿™ API é©¬ä¸Šå°±è¦åˆ äº† blablablablaâ€¦â€¦&amp;quot;ï¼Œéšåæ˜¯
å…³é”®æ€§çš„ &lt;code&gt;use of jas_init is deprecated&lt;/code&gt;&lt;br&gt;
è€Œè¿™ä¹‹åæ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®å†…å­˜ä¸Šé™çš„è­¦å‘Š&lt;br&gt;
å†ä¹‹åå°±æ˜¯çˆ†ç‚¸ç°åœºäº†ï¼š&lt;code&gt;&#39;./test&#39; terminated by signal SIGSEGV&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆä½¿ç”¨ gdb è¿›è¡Œä¸€ä¸ª backtrace çš„æŸ¥ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;gdb-colortable&#34; src=&#34;https://mooody.me/posts/2022-06/jasper3-crash-analysis/jasper-qimage-colortable-gdb.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥è§‚æµ‹åˆ°ï¼ˆ&lt;code&gt;#6&lt;/code&gt;ï¼‰è¿™é‡Œçš„ä¸€ä¸ª ASSERT ç‚¸æ‰äº†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;QRgb QImage&lt;span style=&#34;color:#ff79c6&#34;&gt;::&lt;/span&gt;color(&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; i) &lt;span style=&#34;color:#ff79c6&#34;&gt;const&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Q_ASSERT(i &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;lt;&lt;/span&gt; colorCount());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; d &lt;span style=&#34;color:#ff79c6&#34;&gt;?&lt;/span&gt; d&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;colortable.at(i) &lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; QRgb(uint(&lt;span style=&#34;color:#ff79c6&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ç»§ç»­è·Ÿè¿›åï¼Œå‘ç° &lt;code&gt;colorCount()&lt;/code&gt; çš„è¿”å›å€¼æ˜¯ &lt;code&gt;0&lt;/code&gt;ï¼Œå³ Color Table çš„å¤§å°ä¸º 0ï¼Œåæ¥ç»è¿‡ç ”ç©¶å‘ç°æ˜¯è¿™ä¸ª
å¤ç°ä¾‹å­å†™é”™äº†ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If format is an indexed color format, the image color table is initially empty
and must be sufficiently expanded with &lt;code&gt;setColorCount()&lt;/code&gt; or &lt;code&gt;setColorTable()&lt;/code&gt; before
the image is used.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ï¼ˆå°½ç®¡åŒæ ·æ˜¯å´©æºƒï¼Œä½† &lt;code&gt;QImage::Format_Grayscale8&lt;/code&gt; å¯¼è‡´æ²¡åˆå§‹åŒ– color table è§¦å‘çš„å´©æºƒä¸ Jasper æ— å…³ï¼‰&lt;/p&gt;
&lt;p&gt;äºæ˜¯æŠŠ &lt;code&gt;QImage::Format_Grayscale8&lt;/code&gt; æ”¹æˆ &lt;code&gt;QImage::Format_RGB32&lt;/code&gt; åï¼Œå¾—åˆ°äº†å¦ä¸€ä¸ªé”™è¯¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;gdb2&#34; src=&#34;https://mooody.me/posts/2022-06/jasper3-crash-analysis/jasper-memory-too-large.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å†æ¬¡æŸ¥çœ‹æºç ï¼Œå¯ä»¥å¾—çŸ¥ &lt;code&gt;memory_stream&lt;/code&gt; å…¶å®æ˜¯ä¸ª &lt;code&gt;nullptr&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// Open an empty jasper stream that grows automatically
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;jas_stream_t &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt; memory_stream &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; jas_stream_memopen(&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff79c6&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// Jasper wants a non-const string.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#8be9fd&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;str &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; qstrdup(jasperFormatString.toLatin1().constData());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;jas_image_encode(jasper_image, memory_stream, fmtid, str);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;delete&lt;/span&gt;[] str;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;jas_stream_flush(memory_stream);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æœ€åå®šä½åˆ°æ ¹æœ¬åŸå› æ˜¯ &lt;code&gt;jas_stream_memopen&lt;/code&gt; çš„ç¬¬äºŒä¸ªå‚æ•°ä¸åº”ä¸º &lt;code&gt;-1&lt;/code&gt;ï¼Œè€Œåº”è¯¥æ˜¯ 0ã€‚&lt;/p&gt;
&lt;p&gt;ä¼ å…¥ &lt;code&gt;-1&lt;/code&gt; åä¼šå› ä¸ºå‚æ•°ç±»å‹æ˜¯ &lt;code&gt;size_t&lt;/code&gt; è€Œè¢«è½¬æ¢æˆ &lt;code&gt;18446744073709551615&lt;/code&gt;ï¼Œç”±äºæ— æ³•è¿›è¡Œå¦‚æ­¤å·¨å¤§é‡çš„ malloc åˆ†é…ï¼Œ
&lt;code&gt;jas_stream_memopen&lt;/code&gt; è¿”å›äº† 0ï¼Œä¹Ÿæœ€ç»ˆå¯¼è‡´åœ¨åç»­å‡½æ•°ä¸­è¿›è¡Œäº†ç©ºæŒ‡é’ˆè§£å¼•ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯ä¸€ç¯‡æ–‡ç« å°±è¿™ä¹ˆæ°´å®Œäº† :)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºå¯¹åº”çš„å‡½æ•°æ·»åŠ  Deprecated è­¦å‘Š: &lt;a href=&#34;https://github.com/jasper-software/jasper/pull/327&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/jasper-software/jasper/pull/327&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ä¸º JasPer 3 ä½¿ç”¨æ–°çš„ API &lt;a href=&#34;https://codereview.qt-project.org/c/qt/qtimageformats/&amp;#43;/417088&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://codereview.qt-project.org/c/qt/qtimageformats/+/417088&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ä¿®å¤é”™è¯¯çš„ buffer size: &lt;a href=&#34;https://codereview.qt-project.org/c/qt/qtimageformats/&amp;#43;/417082&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://codereview.qt-project.org/c/qt/qtimageformats/+/417082&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Android &#39;Deploy&#39; Qt?</title>
      <link>https://mooody.me/posts/2022-05/android-deploy-qt/</link>
      <pubDate>Fri, 13 May 2022 02:09:05 +0100</pubDate>
      
      <guid>https://mooody.me/posts/2022-05/android-deploy-qt/</guid>
      <description>&lt;h2 id=&#34;ä½ è¿™-androiddeployqt-å¯èƒ½æ²¡æ³•æ­£å¸¸-deploy-qt&#34;&gt;
  ä½ è¿™ &lt;code&gt;androiddeployqt&lt;/code&gt; å¯èƒ½æ²¡æ³•æ­£å¸¸ deploy Qt
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e4%bd%a0%e8%bf%99-androiddeployqt-%e5%8f%af%e8%83%bd%e6%b2%a1%e6%b3%95%e6%ad%a3%e5%b8%b8-deploy-qt&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;h3 id=&#34;ä¸€äº›æ— èŠçš„æ¦‚å¿µ&#34;&gt;
  ä¸€äº›æ— èŠçš„æ¦‚å¿µ
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e4%b8%80%e4%ba%9b%e6%97%a0%e8%81%8a%e7%9a%84%e6%a6%82%e5%bf%b5&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;Moody&amp;rsquo;s Utility Bot&lt;/em&gt; æ˜¯ä¸€ä¸ªä¸&lt;a href=&#34;https://github.com/moodyhunter/MoodyAPI&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤ä»“åº“&lt;/a&gt; GitHub Actions &lt;del&gt;æ¢¦å¹»è”åŠ¨&lt;/del&gt; çš„ Telegram Bot&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è´Ÿè´£å‘é€æ¶ˆæ¯å’Œæœ€æ–° build äº§ç‰©ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;del&gt;åŒæ—¶ä¹Ÿè´Ÿè´£æé†’è”¡é˜Ÿèµ·æ¥ï¼ˆå‡ºå¤„ï¼š&lt;a href=&#34;https://github.com/moodyhunter/MoodyAPI/blob/1f1d32a8c761c7c13d486cd4e7af657e838cd44f/Server/main.go#L70&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&amp;ldquo;æˆ‘èµ·æ¥äº†&amp;rdquo;&lt;/a&gt;ï¼‰&lt;/del&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Qt æ˜¯ â€¦â€¦&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿™è¿˜ç”¨ä»‹ç»å—&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QtGraphicalEffects æ˜¯ â€¦â€¦&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Qt5 æ—¶æœŸçš„ä¸€ä¸ª Qt moduleï¼Œé¡¾åæ€ä¹‰è´Ÿè´£ â€œå›¾å½¢ç‰¹æ•ˆâ€ æ¯”å¦‚æ¸å˜ï¼Œé˜´å½±ç”šè‡³ GLSL æ•ˆæœ&lt;/li&gt;
&lt;li&gt;ä½†åœ¨ Qt6 ä¸­è¢« deprecate äº†&lt;/li&gt;
&lt;li&gt;ä½†æˆ‘ç¡¬æ˜¯å¼ºè¡Œå°†å…¶ port åˆ° Qt6ï¼Œå…¶å®æ˜¯ä¸€ç§ â€œåˆä¸æ˜¯ä¸èƒ½ç”¨â€ çš„çŠ¶æ€&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;å¼€ç«¯&#34;&gt;
  ã€Šå¼€ç«¯ã€‹ï¼Ÿ
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%bc%80%e7%ab%af&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;2022 å¹´ 5 æœˆ 1 æ—¥å‡Œæ™¨ 1 ç‚¹ 00 åˆ† 56 ç§’ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Moody&amp;rsquo;s Utils Bot:&lt;/p&gt;
&lt;p&gt;Successfully built the client app, [File : MoodyAppMain.apk]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘éšå³ä¸‹è½½å¹¶å®‰è£…äº†æ–°ç‰ˆ &lt;code&gt;MoodyAppMain.apk&lt;/code&gt;ï¼Œ&lt;del&gt;ç¬‘æ­»&lt;/del&gt;ï¼Œç›´æ¥å´©æ‰ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ—¶æˆ‘å¿ƒé‡Œå¾ˆæ¸…æ¥šè¿™ç©æ„å·²ç»ç‚¸äº†ä¸€ä¸ªæœˆäº†ï¼Œä»æ„šäººèŠ‚å½“å¤©çš„ &lt;a href=&#34;https://github.com/moodyhunter/MoodyAPI/commit/ad042600dfed5bc44efe5fccca7888ae8247befd&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ad042600&lt;/a&gt; ä»¥åå°±å…¨ç›˜è£‚å¼€ï¼Œä½†è¿™ commit åªæ˜¯ç®€å•çš„å‡çº§äº†ä¸€ä¸‹ Qt ç‰ˆæœ¬ï¼ˆ622 åˆ° 630ï¼‰ï¼Œå¹¶ä¸åº”è¯¥å¼•å…¥æ–°çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆé‚£å¤©è¦è¿ç§» Build Serverï¼Ÿ ç­”ï¼šä¹‹å‰çš„ç¼–è¯‘æœºç‚¸äº†ã€‚&lt;/p&gt;
&lt;p&gt;å› ä¸ºå‰æ®µæ—¶é—´æœ‰è€ƒè¯•ï¼Œæ­¤æ—¶ï¼ˆäº”æœˆä¸€å·ï¼‰è¿˜å¤„äºè€ƒå®Œè¯•ç–¯ç©æœŸé—´ï¼Œå°±å¹¶æ²¡æœ‰å¯¹æ­¤è¿›è¡Œè°ƒæŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;â€¦â€¦â€¦â€¦&lt;/p&gt;
&lt;h3 id=&#34;å¤ç°&#34;&gt;
  å¤ç°
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%a4%8d%e7%8e%b0&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;æ„æ€æ˜¯è¿™ä¸ª bug 4 æœˆ 1 å·çš„ commit å¼€å§‹å‡ºç°ï¼Œä¸€ç›´å’•åˆ°ç°åœ¨æ‰å¼€å§‹ä¿®ï¼ˆå¤§æ¦‚æ˜¯ç©å¤Ÿäº†ï¼Œè¯¥è€è€å®å®æŠŠ broken build ä¿®ä¸€ä¿®äº†ï¼‰ï¼Œäºæ˜¯æˆ‘å¼€å§‹é‡æ–°æ‹¿èµ· QtCreator&lt;/p&gt;
&lt;p&gt;é¦–å…ˆä½¿ç”¨ QtCreator ç›´æ¥ç¼–è¯‘ï¼ˆæˆ‘éƒ½å¤šé•¿æ—¶é—´æ²¡å†™è¿‡ QML äº†ï¼‰&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;é¦–å…ˆæˆ‘å¾— Build ä¸ª Qtï¼Œæˆ–è€…ä» Qt installer ä¸‹è½½ä¸€ä»½ Qt for Androidï¼Œä½†æ˜¯æˆ‘æœ‰ &lt;a href=&#34;https://github.com/moodyhunter/QtBuildScript&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;QtBuildScript&lt;/a&gt;ï¼Œç›´æ¥ &lt;code&gt;./build-qt.fish -p android -a x86_64&lt;/code&gt; å³å¯ç¼–è¯‘ Qt &lt;del&gt;ï¼ˆä»€ä¹ˆç‹å©†å–ç“œç¯èŠ‚ï¼‰&lt;/del&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ç­‰äº†åŠä¸ªå°æ—¶ä»¥åï¼Œæ‰“å¼€ QtCreator å¹¶ï¼ˆä»å¤´ï¼‰ï¼ˆé‡æ–°ï¼‰é…ç½® Qt ç¯å¢ƒï¼ˆè¿™ç§ä¸œè¥¿æ²¡å¿…è¦èµ˜è¿°ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ä»¥ä¸‹ CMake å‚æ•°~~ï¼ˆè¿™ä¸ªå¾—è®°ï¼Œä¸‹æ¬¡è¦è€ƒï¼‰~~ è¿›è¡Œ configure å¹¶å¼€å§‹ build&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cmake&#34; data-lang=&#34;cmake&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;-DCMAKE_TOOLCHAIN_FILE=/PATH/TO/VCPKG/scripts/buildsystems/vcpkg.cmake
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;-DVCPKG_CHAINLOAD_TOOLCHAIN_FILE=/PATH/TO/NDK/build/cmake/android.toolchain.cmake
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;-DVCPKG_TARGET_TRIPLET=x64-android
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸Šæ–‡ CMake å‚æ•°åªé€‚ç”¨äºåœ¨ QtCreator ä¸­ä½¿ç”¨ vcpkg å’Œ Android toolchainï¼Œè€Œåœ¨å‘½ä»¤è¡Œ
ä¸­ä½¿ç”¨ qt-cmake åˆ™éœ€è¦å¦ä¸€ä¸ªå˜é‡&lt;/p&gt;
&lt;p&gt;ä¹Ÿå°±æ˜¯æŠŠ &lt;code&gt;CMAKE_TOOLCHAIN_FILE&lt;/code&gt; æ¢ä¸º &lt;code&gt;QT_CHAINLOAD_TOOLCHAIN_FILE&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éšåå¯åŠ¨ Android è™šæ‹Ÿæœºè¿›è¡Œæµ‹è¯•ï¼Œç»“æœ &lt;strong&gt;BANG&lt;/strong&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;W MoodyApp: QQmlApplicationEngine failed to load component
W MoodyApp: qrc:/client/api/mooody/me/qml/main.qml:5:1: module &amp;#34;QtGraphicalEffects&amp;#34; is not installed
W MoodyApp: exit app 0
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æƒ³èµ·ä¹‹å‰å†™è¿‡ä¸€ç¯‡ &lt;a href=&#34;https://mooody.me/posts/2021-09/qt6-cmake-porting-guide/&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;qt_add_qml_module&lt;/code&gt;&lt;/a&gt; CMake å‡½æ•°çš„&amp;quot;è¯¦&amp;quot;è§£ï¼Œä½†ç°åœ¨åè¿‡æ¥çœ‹äº†çœ‹ï¼Œå¹¶æ²¡æœ‰ç€é‡è¯´æ˜ &lt;code&gt;IMPORT_PATH&lt;/code&gt; çš„é‡è¦æ€§ï¼Œäºæ˜¯æ‰“å¼€ &lt;a href=&#34;https://doc-snapshots.qt.io/qt6-dev/qt-add-qml-module.html#qt6-add-qml-module&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Qt æ–‡æ¡£ (dev åˆ†æ”¯ç‰ˆ)&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ–‡æ¡£é‡Œè¯´ï¼š&lt;em&gt;&lt;code&gt;IMPORT_PATH&lt;/code&gt; å¯ä»¥ç”¨æ¥æ·»åŠ è¢«ä¾èµ–çš„ QML æ¨¡å—çš„æœç´¢è·¯å¾„ã€‚è¿™é‡ŒæŒ‡å®šçš„ä½ç½®éœ€è¦åŒ…å« &lt;code&gt;qmldir&lt;/code&gt; æ–‡ä»¶æ¥æ ‡æ˜æ­¤æ–‡ä»¶å¤¹ä»£è¡¨äº†ä¸€ä¸ª QML æ¨¡å—ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é‚£çœ‹æ¥æˆ‘åŠ ä¸€ä¸ªå°±è¡Œï¼Ÿåœ¨é¡¹ç›®é‡Œæ·»åŠ äº† &lt;code&gt;IMPORT_PATH ${CMAKE_BINARY_DIR}&lt;/code&gt; å¹¶é‡æ–° buildï¼Œæœç„¶æ•ˆæœæ‹”ç¾¤ï¼&lt;/p&gt;
&lt;p&gt;åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œç¨‹åºæˆåŠŸåœ°åœ¨ Android VM ä¸­è¿è¡Œäº†ã€‚äºæ˜¯æˆ‘åˆè¿›è¡Œäº†ä¸€è½®å®ä½“æœºçš„æµ‹è¯•ï¼Œç»ˆäºæˆåŠŸåœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆä¸€å°ä¸‰æ˜Ÿæ‰‹æœºï¼‰ä¸ŠæˆåŠŸè¿è¡Œèµ·è¿™ä¸ª APKã€‚&lt;/p&gt;
&lt;p&gt;æœ€åçš„æœ€åï¼Œæˆ‘è¿›è¡Œäº† &lt;code&gt;git push&lt;/code&gt;ï¼Œå¹¶å‡†å¤‡ä¼‘æ¯&lt;/p&gt;
&lt;h3 id=&#34;å°±è¿™å°±è¿™èƒ½æ°´ä¸€ç¯‡æ–‡ç« &#34;&gt;
  å°±è¿™ï¼Ÿå°±è¿™èƒ½æ°´ä¸€ç¯‡æ–‡ç« ï¼Ÿ
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%b0%b1%e8%bf%99%e5%b0%b1%e8%bf%99%e8%83%bd%e6%b0%b4%e4%b8%80%e7%af%87%e6%96%87%e7%ab%a0&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;å’•äº†ä¸€ä¸ªæœˆçš„ bug ä»…ä¸¤è¡Œä»£ç å°±èƒ½ä¿®å¥½ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åˆ«æ€¥ï¼Œæœ¬æ–‡æ ‡é¢˜æ‰€è¯´çš„ &lt;code&gt;androiddeployqt&lt;/code&gt; è¿˜æ²¡å‡ºåœºå‘¢&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;a href=&#34;https://github.com/moodyhunter/MoodyAPI/commit/9f6512c3fb7a94e377a2a7f55ddcb5d4ef72b75e&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;commit&lt;/a&gt; çš„æ—¶å€™ï¼Œæˆ‘å°±æš—è‡ªæ€€ç–‘ï¼š&amp;ldquo;Is it simple like this?&amp;quot;ï¼Œå“ˆå“ˆäº‹å®è¯æ˜ï¼šä¸å¯èƒ½çš„&lt;/p&gt;
&lt;p&gt;å°±åœ¨ä¸¤åˆ†é’Ÿåï¼Œç¼–è¯‘æœºå°† CI ç¯å¢ƒä¸‹ç¼–è¯‘å®Œæˆçš„ APK è‡ªåŠ¨å‘é€åˆ°äº† Telegram ç¾¤ï¼Œæˆ‘ç«‹å³å®‰è£…å¹¶æ‰“å¼€ï¼Œç»“æœç«Ÿç„¶&lt;strong&gt;åˆ&lt;/strong&gt;é—ªé€€äº†&lt;/p&gt;
&lt;p&gt;è¿™ä¸‹æˆ‘äººéº»äº†ï¼Œä»å¤´é¡¶éº»åˆ°è„šå°–ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä¹‹å‰çš„å¼€å‘è¿‡ç¨‹ä¸­å¯éƒ½æ²¡å‡ºç°è¿‡ CI äº§ç‰©æ²¡æ³•ç”¨çš„é—®é¢˜å•Š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;åˆ¨æ ¹é—®åº•&#34;&gt;
  åˆ¨æ ¹é—®åº•
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%88%a8%e6%a0%b9%e9%97%ae%e5%ba%95&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;å¤§æ¦‚ä¸ç”¨è®²é“ç†ï¼ŒAndroid ä¸Šè°ƒè¯•è‚¯å®šå¾—æ¬å‡º &lt;code&gt;adb logcat&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;26896  4836 W MoodyApp: QQmlApplicationEngine failed to load component
26896  4836 W MoodyApp: qrc:/client/api/mooody/me/qml/main.qml:5:1: module &amp;#34;QtGraphicalEffects&amp;#34; is not installed
26896  4836 W MoodyApp: exit app 0
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;è¿™æ€ä¹ˆå’Œä¸Šé¢çš„ output ä¸€æ¨¡ä¸€æ ·å•Šï¼Œä¸æ˜¯ä¿®å¥½äº†å—ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æˆ‘çš„ QtGraphicalEffects åˆå»å“ªäº†ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;æ‹†åŒ…è§£å‹&#34;&gt;
  æ‹†åŒ…ï¼ˆè§£å‹ï¼‰
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e6%8b%86%e5%8c%85%e8%a7%a3%e5%8e%8b&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;ç¨å¾®ç†è§£ä¸€äº› Qt/QML çš„è¯»è€…å¯èƒ½ä¼šçŸ¥é“ï¼Œä¸€ä¸ª QML æ¨¡å—å…¶å®å¯¹åº”äº†ä¸€ä¸ªï¼ˆæˆ–ä¸¤ä¸ªï¼Œæˆ–é›¶ä¸ªï¼‰åŠ¨æ€åº“ï¼Œè€Œ Android æ‰“åŒ…
è¿‡ç¨‹ä¸­æ˜¯ä¼šæŠŠè¿™äº›ä¾èµ–çš„åŠ¨æ€åº“æ‰“è¿› APK çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä¸ºäº†ä»”ç»†ç ”ç©¶ APK é‡Œçš„å†…å®¹ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨ &lt;del&gt;KDE ç²¾å“å‹ç¼©æ–‡ä»¶æŸ¥çœ‹å™¨&lt;/del&gt; Ark æ‰“å¼€ APK ä¸€æ¢ç©¶ç«Ÿï¼š&lt;/p&gt;
&lt;p&gt;ï¼ˆå›¾å¾ˆå°ï¼Œç†è®ºä¸Šå¯ä»¥ç›´æ¥å³é”®çœ‹æºæ–‡ä»¶ï¼‰&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;APK å†…éƒ¨&#34; src=&#34;https://mooody.me/posts/2022-05/android-deploy-qt/androiddeployqt-apk-1.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ‰“å¼€æºæ–‡ä»¶å›¾ç‰‡ä»¥åï¼Œå°±å¯ä»¥å¾ˆæ¸…æ™°åœ°çœ‹åˆ° QtGraphicalEffects å¹¶æ²¡æœ‰åœ¨ &lt;code&gt;lib/&lt;/code&gt; æ–‡ä»¶å¤¹å†…&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•¥å« &amp;ldquo;å¯ä»¥å¾ˆæ¸…æ™°åœ°çœ‹åˆ° xxx æ²¡åœ¨&amp;rdquo;ï¼Ÿ&lt;/li&gt;
&lt;li&gt;&lt;del&gt;anyway&lt;/del&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¾èµ–çš„ so æ²¡åœ¨ APK åŒ…é‡Œï¼Œè¿™è‚¯å®šæ˜¯æŸäº› deployment çš„é—®é¢˜&lt;/p&gt;
&lt;h4 id=&#34;ci-log&#34;&gt;
  CI Log
  &lt;a class=&#34;heading-link&#34; href=&#34;#ci-log&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;ç»è¿‡å¯¹æ¯”ï¼ŒCMake Configure è¾“å‡ºå’Œæœ¬åœ° build æ—¶çš„è¾“å‡ºå¹¶æ— åŒºåˆ«ï¼ŒQt ç‰ˆæœ¬ä¹Ÿä¸€è‡´ï¼Œé‚£ä¹ˆé—®é¢˜å°±è¢«ç¼©å‡åˆ°äº† deployment è¿‡ç¨‹ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä½¿ç”¨ &lt;code&gt;cmake --build . --parallel --verbose&lt;/code&gt; è®© CMake åœ¨ build è¿‡ç¨‹ä¸­è¾“å‡ºè¯¦ç»†å†…å®¹ï¼Œå¤§æ¦‚å°±æ˜¯æ¯ä¸€
æ­¥éª¤è¿è¡Œçš„ç¨‹åºï¼Œå‘ç° Qt åœ¨ Android å¹³å°çš„ deployment å…¶å®æ˜¯ä¸€ä¸ªåä¸º &lt;code&gt;androiddeployqt&lt;/code&gt; çš„ç¨‹åºè¿›è¡Œçš„ï¼Œ
å®ƒè¯¦ç»†çš„å‚æ•°æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# ç¨å¾® format äº†ä¸€ä¸‹ï¼Œä¸ç„¶æ²¡æ³•ç»™äººçœ‹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# éƒ¨åˆ†å†…å®¹åšäº† placeholder å¤„ç†ï¼Œå› ä¸ºæºç›®å½•å¤ªé•¿äº†&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# BUILDDIR è¡¨ç¤º build ç›®å½•&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# PATH_TO_QT è¡¨ç¤º Qt ï¼ˆhost ç‰ˆæœ¬ï¼‰ å®‰è£…è·¯å¾„ï¼ˆä¸æ˜¯ Androidï¼‰&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;/PATH_TO_QT/bin/androiddeployqt &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    --input /BUILDDIR/android-MoodyAppMain-deployment-settings.json &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    --output /BUILDDIR/android-build &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    --apk /BUILDDIR/android-build/MoodyAppMain.apk &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    --depfile /BUILDDIR/android-build/MoodyAppMain.d &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;    --builddir /BUILDDIR
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¯ä»¥æ˜æ˜¾çœ‹åˆ°ä¼ å…¥å‚æ•°æ˜¯ &lt;code&gt;android-MoodyAppMain-deployment-settings.json&lt;/code&gt; è¿™åª JSON&lt;/p&gt;
&lt;p&gt;å¤§æ¦‚æ˜¯æœ¬èƒ½ååº”ï¼Ÿæ‰“å¼€äº†æœ¬åœ°èƒ½ç”¨çš„ JSON æ–‡ä»¶è¿›è¡Œå¯¹æ¯”ï¼š&lt;/p&gt;
&lt;p&gt;è¿™ç§ç©æ„ä¸€èˆ¬äººéƒ½çœ‹ä¸æ‡‚å§ï¼š
&lt;img alt=&#34;diff-1&#34; src=&#34;https://mooody.me/posts/2022-05/android-deploy-qt/androiddeployqt-diff-1.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;æ•´ç¯‡éƒ½æ˜¯ path ä¸åŒå¯¼è‡´çš„ diffï¼Œç®€ç›´è¦å‘½ã€‚æ‰€ä»¥æˆ‘å°† JSON é‡Œçš„ç»å¯¹è·¯å¾„æ”¹ä¸ºäº† &lt;code&gt;/SOURCE&lt;/code&gt;, &lt;code&gt;/BUILDDIR&lt;/code&gt; ä¸€ç±»çš„ placeholderï¼Œdiff å¾—å‡ºä»¥ä¸‹ç»“æœï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-diff&#34; data-lang=&#34;diff&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;font-weight:bold&#34;&gt;diff ./android-MoodyAppMain-deployment-settings.json ./json2.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;font-weight:bold&#34;&gt;&lt;/span&gt;&lt;span style=&#34;font-weight:bold&#34;&gt;5c5
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;font-weight:bold&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f55&#34;&gt;&amp;lt;    &amp;#34;sdkBuildToolsRevision&amp;#34;: &amp;#34;33.0.0-rc2&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f55&#34;&gt;&lt;/span&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#50fa7b;font-weight:bold&#34;&gt;&amp;gt;    &amp;#34;sdkBuildToolsRevision&amp;#34;: &amp;#34;31.0.0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#50fa7b;font-weight:bold&#34;&gt;&lt;/span&gt;&lt;span style=&#34;font-weight:bold&#34;&gt;16d15
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;font-weight:bold&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f55&#34;&gt;&amp;lt;    &amp;#34;application-binary&amp;#34;: &amp;#34;MoodyAppMain&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f55&#34;&gt;&lt;/span&gt;&lt;span style=&#34;font-weight:bold&#34;&gt;18a18
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;font-weight:bold&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#50fa7b;font-weight:bold&#34;&gt;&amp;gt;    &amp;#34;application-binary&amp;#34;: &amp;#34;MoodyAppMain&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å¿½ç•¥ 16/18 è¡Œçš„é¡ºåºé—®é¢˜ï¼Œæˆ‘å‘ç° sdk ç‰ˆæœ¬å‡ºç°äº†ä¸ä¸€è‡´ã€‚ä½†åœ¨ CI æœºå™¨ä¸Šå®‰è£…åŒæ ·ç‰ˆæœ¬çš„ Android SDK åï¼Œ
build å‡ºæ¥çš„ APK ä»ç„¶ä¸åŒ…å« QtGraphicalEffects æ¨¡å—ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å’‹å›äº‹å‘¢&#34;&gt;
  å’‹å›äº‹å‘¢ï¼Ÿ
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%92%8b%e5%9b%9e%e4%ba%8b%e5%91%a2&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;æ£€æŸ¥äº† &lt;code&gt;androiddeployqt&lt;/code&gt; çš„å‚æ•°ï¼Œæ˜¯ä¸æ˜¯è¯¥æ£€æŸ¥ä¸€ä¸‹è¾“å‡ºäº†ï¼š&lt;/p&gt;
&lt;p&gt;ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆæœ‰æ„ä¹‰çš„ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;diff-2&#34; src=&#34;https://mooody.me/posts/2022-05/android-deploy-qt/androiddeployqt-diff-2.png&#34;&gt;&lt;/p&gt;
&lt;h4 id=&#34;--verbose&#34;&gt;
  &lt;code&gt;--verbose&lt;/code&gt;ï¼Ÿ
  &lt;a class=&#34;heading-link&#34; href=&#34;#--verbose&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h4&gt;
&lt;p&gt;æ— æ„é—´å‘ç° &lt;code&gt;androiddeployqt&lt;/code&gt; æœ‰ &lt;code&gt;--verbose&lt;/code&gt; é€‰é¡¹ï¼Œæ‰“å¼€ verbose åï¼Œäº‹æƒ…å‡ºç°äº†è½¬æœºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;diff-3&#34; src=&#34;https://mooody.me/posts/2022-05/android-deploy-qt/androiddeployqt-diff-3.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆå« &lt;code&gt;is in QML root path&lt;/code&gt;ï¼Œå½“æˆ‘å›å»æ£€æŸ¥ &lt;code&gt;android-MoodyAppMain-deployment-settings.json&lt;/code&gt; æ—¶å‘ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CI ç¯å¢ƒçš„ build ç›®å½•åœ¨ &lt;code&gt;SOURCE/build&lt;/code&gt;ï¼Œå¾ˆæ˜æ˜¾ &lt;code&gt;SOURCE&lt;/code&gt; å°±æ˜¯ QML root pathï¼›&lt;/li&gt;
&lt;li&gt;è€Œæœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œç”±äºç»Ÿä¸€ç®¡ç†äº† build äº§ç‰©ï¼Œé»˜è®¤çš„ &lt;code&gt;CMAKE_BINARY_DIR&lt;/code&gt; ä½äº &lt;code&gt;~/.local/build_temp&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™å°±å¯¼è‡´ &lt;code&gt;BUILDDIR/QtGraphicalEffects&lt;/code&gt; åœ¨ CI ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒå¤„äºäº†ä¸åŒçš„ç›¸å¯¹ä½ç½®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CI ç¯å¢ƒä¸‹ï¼Œä½äº QML root path å­ç›®å½•&lt;/li&gt;
&lt;li&gt;å¼€å‘ç¯å¢ƒä¸‹ï¼Œåä¹‹ï¼Œå¤„äºåˆ«çš„åœ°æ–¹&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ ¸å¿ƒé—®é¢˜&#34;&gt;
  æ ¸å¿ƒé—®é¢˜
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e6%a0%b8%e5%bf%83%e9%97%ae%e9%a2%98&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä½äº &lt;a href=&#34;https://github.com/qt/qtbase/blob/dev/src/tools/androiddeployqt/main.cpp#L2103&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;src/tools/androiddeployqt/main.cpp:L2011&lt;/a&gt; è°ƒç”¨çš„ &lt;code&gt;checkQmlFileInRootPaths(const Options*, const QString &amp;amp;)&lt;/code&gt; å¯çŸ¥ï¼š&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå‡½æ•°æ— è„‘ï¼ˆåªï¼‰æ£€æŸ¥äº†å­ç›®å½•ï¼Œè€Œå¹¶æ£€æŸ¥ã€Œå³ä½¿ module ä½äºå­ç›®å½•ï¼Œèƒ½å¦é€šè¿‡ import URI å¯¼å…¥æ­¤ moduleã€ï¼Œå› æ­¤
å¯¼è‡´ SOURCE ä¸‹çš„æ‰€æœ‰ QML module éƒ½ä¼šè¢«è®¤ä¸º &amp;ldquo;ä½äº QML import path å†…&amp;rdquo;ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ï¼š&lt;/p&gt;
&lt;p&gt;è¿™ä¸ª QML import path ä¸ä¼šè¢« deploy åˆ° APK é‡Œé¢ï¼Œé‚£è‡ªç„¶é‡Œé¢çš„ QML module å°±å…¨ä¸¢äº†ï¼šï¼‰&lt;/p&gt;
&lt;h3 id=&#34;åç»­&#34;&gt;
  åç»­
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%90%8e%e7%bb%ad&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ç»™ Qt å‘äº†ä¸ª patch &lt;a href=&#34;https://codereview.qt-project.org/c/qt/qtbase/&amp;#43;/411805&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;qtbase@411805&lt;/a&gt;ï¼Œ
å¸Œæœ›èƒ½å¸®ä¸Šå¿™ï¼Œ&lt;del&gt;ä½†è¯´å®è¯æˆ‘ä¹Ÿä¸ç¡®å®šæ˜¯å¦åº”è¯¥è¿™æ ·ä¿®&lt;/del&gt;&lt;/p&gt;
&lt;h2 id=&#34;ç»“è¯­&#34;&gt;
  ç»“è¯­
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e7%bb%93%e8%af%ad&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ç¡è§‰ï¼Œæ™šå®‰&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>QProcess in Qemu - A Detailed Explanation</title>
      <link>https://mooody.me/posts/2022-04/qprocess-in-qemu/</link>
      <pubDate>Thu, 28 Apr 2022 15:44:00 +0100</pubDate>
      
      <guid>https://mooody.me/posts/2022-04/qprocess-in-qemu/</guid>
      <description>&lt;p&gt;It&amp;rsquo;s been a long time since my promise to publish a detailed write-up on what the hell was
actually going on inside qemu.&lt;/p&gt;
&lt;p&gt;Qt, for its Unix QProcess implementation, utilises &lt;a href=&#34;https://doc.qt.io/qt-6/qtcore-attribution-forkfd.html&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;forkfd library&lt;/a&gt;, (See also: &lt;a href=&#34;https://github.com/qt/qtbase/tree/dev/src/3rdparty/forkfd&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/qt/qtbase/tree/dev/src/3rdparty/forkfd&lt;/a&gt;) as a helper library to fork subprocess.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pidfd&lt;/code&gt; is a new kernel feature, which has just been added to the kernel upon v5.2.&lt;/p&gt;
&lt;p&gt;Since &lt;a href=&#34;https://codereview.qt-project.org/c/qt/qtbase/&amp;#43;/313894&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;this merge&lt;/a&gt;, Qt added a new
configuration feature (&lt;code&gt;forkfd_pidfd&lt;/code&gt;, &amp;ldquo;CLONE_PIDFD support in forkfd&amp;rdquo;) and it was default
to ON on Linux.&lt;/p&gt;
&lt;p&gt;When this feature is ON, Qt does nothing special, forkfd library selectively uses either
&lt;code&gt;forkfd()&lt;/code&gt; or &lt;code&gt;fork()&lt;/code&gt; based on kernel version: (it goes into
&lt;a href=&#34;https://github.com/qt/qtbase/blob/dev/src/3rdparty/forkfd/forkfd.c#L654-L656&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;this branch&lt;/a&gt;
and then
&lt;a href=&#34;https://github.com/qt/qtbase/blob/dev/src/3rdparty/forkfd/forkfd_linux.c#L150&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;sets CLONE_PIDFD here&lt;/a&gt;
before calling
&lt;a href=&#34;https://github.com/qt/qtbase/blob/dev/src/3rdparty/forkfd/forkfd_linux.c#L68&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;clone&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;OTOH, if the feature is OFF, Qt sets the &lt;code&gt;FFD_USE_FORK&lt;/code&gt; flag (say: forkfd please use &lt;code&gt;fork&lt;/code&gt;
anyway) when calling &lt;code&gt;::forkfd()&lt;/code&gt;, which will cause forkfd to use &lt;code&gt;fork()&lt;/code&gt; direcly.&lt;/p&gt;
&lt;p&gt;Under regular circumstances, this works well, forkfd is smart enough to correctly detect the
kernel version and use the correct syscall, however, things go south fast when &lt;code&gt;qemu-user&lt;/code&gt;
steps in:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Qt has no &lt;code&gt;FFD_USE_FORK&lt;/code&gt; set, and&lt;/li&gt;
&lt;li&gt;forkfd thinks the kernel has correct &lt;code&gt;forkfd&lt;/code&gt; syscall implementation (because it should have), and&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;QEMU has no support for &lt;code&gt;clone&lt;/code&gt;-ing with &lt;code&gt;CLONE_PIDFD&lt;/code&gt; yet (there&amp;rsquo;s a &lt;a href=&#34;https://patchew.org/QEMU/mvm4kadwyrm.fsf@suse.de/&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;possibly abandoned patch&lt;/a&gt;)&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;(original blog post: &lt;a href=&#34;https://mooody.me/posts/2022-04/archrv-qmake6/&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è®°ä¸€æ¬¡-debug-qmake&lt;/a&gt;)&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ArchRV - BuggyFFI</title>
      <link>https://mooody.me/posts/2022-04/archrv-libffi/</link>
      <pubDate>Tue, 19 Apr 2022 23:09:10 +0100</pubDate>
      
      <guid>https://mooody.me/posts/2022-04/archrv-libffi/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;EXPAND MY INTEGER!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/libffi/libffi&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;libffi&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;libffi-æ˜¯ä»€ä¹ˆ&#34;&gt;
  libffi æ˜¯ä»€ä¹ˆï¼Ÿ
  &lt;a class=&#34;heading-link&#34; href=&#34;#libffi-%e6%98%af%e4%bb%80%e4%b9%88&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;A portable foreign-function interface library.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¯´äººè¯å°±æ˜¯ï¼š&lt;a href=&#34;https://github.com/libffi/libffi#what-is-libffi&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;â€¦â€¦ç®—äº†ä½ è‡ªå·±å»çœ‹å§&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;libffi-æ€ä¹ˆäº†&#34;&gt;
  libffi æ€ä¹ˆäº†ï¼Ÿ
  &lt;a class=&#34;heading-link&#34; href=&#34;#libffi-%e6%80%8e%e4%b9%88%e4%ba%86&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;TLDRï¼šæµ‹è¯•ç‚¸äº†&lt;/li&gt;
&lt;li&gt;or, å•å…ƒæµ‹è¯•æ–‡ä»¶ &lt;code&gt;./testsuite/libffi.call/strlen.c&lt;/code&gt; ç¬¬ 32 è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;30&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt;  s &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;31&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt;  ffi_call(&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;cif, FFI_FN(my_strlen), &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;rint, values);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;32&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt;  CHECK(rint &lt;span style=&#34;color:#ff79c6&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;çš„ &lt;code&gt;CHECK&lt;/code&gt; å¤±è´¥äº†ï¼ˆ &lt;code&gt;rint&lt;/code&gt; ä¸ç­‰äº &lt;code&gt;1&lt;/code&gt; äº†ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;libffi-æµ‹è¯•ä¸ºä»€ä¹ˆç‚¸äº†&#34;&gt;
  libffi æµ‹è¯•ä¸ºä»€ä¹ˆç‚¸äº†ï¼Ÿ
  &lt;a class=&#34;heading-link&#34; href=&#34;#libffi-%e6%b5%8b%e8%af%95%e4%b8%ba%e4%bb%80%e4%b9%88%e7%82%b8%e4%ba%86&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆæ¥çœ‹ä»£ç ï¼ˆç»è¿‡ç®€åŒ–ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// testsuite/libffi.call/strlen.c
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;size_t ABI_ATTR &lt;span style=&#34;color:#50fa7b&#34;&gt;my_strlen&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;s) { &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; (strlen(s)); }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;main&lt;/span&gt; (&lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#6272a4&#34;&gt;// çœç•¥äº†éƒ¨åˆ†æ— å…³ä»£ç 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#8be9fd&#34;&gt;char&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;s &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;values[MAX_ARGS];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  values[&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;) &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;s;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ffi_arg rint;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  ffi_call(&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;cif, FFI_FN(my_strlen), &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;rint, values);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  CHECK(rint &lt;span style=&#34;color:#ff79c6&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;1&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;è§‚æµ‹&#34;&gt;
  è§‚æµ‹
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e8%a7%82%e6%b5%8b&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ç»è¿‡ä¸¤åˆ†é’Ÿçš„ä»£ç è§‚æµ‹ï¼Œä»ä»¥ä¸Šä»£ç å— L12 æ¥çœ‹ï¼Œ&lt;code&gt;rint&lt;/code&gt; æ˜¯ä¸€ä¸ª &lt;code&gt;ffi_arg&lt;/code&gt; ç±»å‹çš„å˜é‡ï¼Œç»è¿‡é˜…è¯» header å¯ä»¥å¾—çŸ¥ï¼Œ&lt;code&gt;ffi_arg&lt;/code&gt; æ˜¯ä¸€ä¸ª 64 ä½æ— ç¬¦å·æ•´æ•°ç±»å‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// src/riscv/ffitarget.h
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;typedef&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;long&lt;/span&gt; ffi_arg;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;typedef&lt;/span&gt;   &lt;span style=&#34;color:#8be9fd&#34;&gt;signed&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;long&lt;/span&gt; ffi_sarg;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é¦–å…ˆä½¿ç”¨ &lt;code&gt;gdb&lt;/code&gt; åœ¨å¯¹åº”çš„ main å‡½æ•°æ‰“æ–­ç‚¹å¹¶å°è¯•å¤ç°é—®é¢˜ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Breakpoint 1, main &lt;span style=&#34;color:#ff79c6&#34;&gt;()&lt;/span&gt; at ./strlen.c:16
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;gdb&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; n // ç‹‚èºçš„å‡ æ¬¡ n
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;gdb&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; p rint
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# ä» c æºç å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ª rint åœ¨è°ƒç”¨å‰æ˜¯ä¸€ä¸ªæ²¡ç»è¿‡ 0 åˆå§‹åŒ–çš„å˜é‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# å› æ­¤å†…å­˜é‡Œé¢æœ‰è„ä¸œè¥¿å¾ˆæ­£å¸¸&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$1&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;72057593903531392&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;gdb&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; p s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$2&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; 0xaaaaaaaaaaab78 &lt;span style=&#34;color:#f1fa8c&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;gdb&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; n
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;31&lt;/span&gt;        ffi_call&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;&amp;amp;cif, FFI_FN&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;my_strlen&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;, &amp;amp;rint, values&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;gdb&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; n
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;gdb&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; p rint
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# ä½†å¦‚æ­¤çœ‹æ¥ï¼Œè°ƒç”¨åçš„ rint åˆ™ä¸åº”è¯¥å‡ºç°è¿™ä¹ˆå¤§çš„ lengthï¼Œæ¯•ç«Ÿæˆ‘ä»¬çš„ s åªæœ‰ä¸€ä¸ªå­—ç¬¦ &amp;#34;a&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$3&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;72057589742960641&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;çœ‹æ¥é—®é¢˜æ ¸å¿ƒå‡ºåœ¨äº† &lt;code&gt;ffi_call&lt;/code&gt; å‡½æ•°é‡Œã€‚&lt;/p&gt;
&lt;p&gt;é‡å¯è°ƒè¯•ï¼Œä½¿ç”¨ s æŒ‡ä»¤è¿›å…¥ &lt;code&gt;ffi_call&lt;/code&gt; å‡½æ•°ç»§ç»­è·Ÿè¿›ã€‚å‘ç°è¿™ä¸œè¥¿è½¬å¤´è°ƒç”¨äº† &lt;code&gt;ffi_call_int&lt;/code&gt;ï¼Œè€Œ
&lt;code&gt;ffi_call_int&lt;/code&gt; æ˜¯ä¸ªä¸çŸ­çš„å‡½æ•°ï¼Œ&lt;del&gt;äºæ˜¯å†³å®šï¼Œè¿˜æ˜¯å…ˆçœ‹ä»£ç å†è·‘ gdb&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/libffi/libffi/blob/464b4b66e3cf3b5489e730c1466ee1bf825560e0/src/riscv/ffi.c#L331&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/libffi/libffi/blob/464b4b66e3cf3b5489e730c1466ee1bf825560e0/src/riscv/ffi.c#L331&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»”ç»†çœ‹ä¸‹æ¥ï¼Œä¸ &lt;code&gt;rvalue&lt;/code&gt; ç›¸å…³çš„å‡ æ®µä»£ç åªæœ‰ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;27
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;28
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;29
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;30
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;31
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;32
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;33
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;34
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;35
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;36
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;37
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;38
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;passed_by_ref&lt;/span&gt;(call_builder &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;cb, ffi_type &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;type, &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; var) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#if ABI_FLEN
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&lt;/span&gt;   &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#ff79c6&#34;&gt;!&lt;/span&gt;var &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; type&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;type &lt;span style=&#34;color:#ff79c6&#34;&gt;==&lt;/span&gt; FFI_TYPE_STRUCT) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       float_struct_info fsi &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; struct_passed_as_elements(cb, type);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;       &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (fsi.as_elements) &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#endif
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;   &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; type&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;size &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt; __SIZEOF_POINTER__;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;ffi_call_int&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#6272a4&#34;&gt;// çœç•¥äº†æ— å…³å‚æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;rvalue,       &lt;span style=&#34;color:#6272a4&#34;&gt;// è¿”å›å€¼ï¼ˆéœ€è¦å…³æ³¨ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// çœç•¥äº†éƒ¨åˆ†æ— å…³ä»£ç 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    size_t rval_bytes &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (rvalue &lt;span style=&#34;color:#ff79c6&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;NULL&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cif&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;rtype&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;size &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;__SIZEOF_POINTER__)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        rval_bytes &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; FFI_ALIGN(cif&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;rtype&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;size, STKALIGN);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// ......
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (rval_bytes)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        rvalue &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;)(alloc_base &lt;span style=&#34;color:#ff79c6&#34;&gt;+&lt;/span&gt; arg_bytes);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// ......
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; return_by_ref &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; passed_by_ref(&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;cb, cif&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;rtype, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (return_by_ref)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        marshal(&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;cb, &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;ffi_type_pointer, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;rvalue);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// çœç•¥å‡†å¤‡å‚æ•°çš„ä¸€ä¸ª for å¾ªç¯...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    ffi_call_asm ((&lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;) alloc_base, cb.aregs, fn, closure);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#ff79c6&#34;&gt;!&lt;/span&gt;return_by_ref &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; rvalue)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        unmarshal(&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;cb, cif&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;rtype, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;, rvalue);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å³ä½¿æ˜¯çœç•¥äº†å…¶ä»–å†…å®¹ï¼Œè¿™æ®µä»£ç ï¼Œä¸€çœ¼çœ‹ä¸‹å»è¿˜æ˜¯æ„Ÿè§‰å¾ˆéš¾å…¥æ‰‹â€¦â€¦&lt;/p&gt;
&lt;p&gt;ä½†æœ‰ä¸¤ç‚¹å€¼å¾—æ³¨æ„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ä¸Šæ–‡ L17 å®šä¹‰çš„ &lt;code&gt;rval_bytes&lt;/code&gt; åœ¨æœ¬æ¬¡æµ‹è¯•ä¸­ä¼šæ’ç­‰äº &lt;code&gt;0&lt;/code&gt;ï¼Œå› ä¸º
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;rvalue&lt;/code&gt; ä¼ å…¥å€¼ä¸ä¼šæ˜¯ &lt;code&gt;NULL&lt;/code&gt;ï¼ˆæˆ‘ä»¬çŸ¥é“è°ƒç”¨æ–¹ç»™äº†åœ°å€çš„ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;passed_by_ref&lt;/code&gt; æ’è¿”å› 0ï¼Œå› ä¸º
&lt;ul&gt;
&lt;li&gt;é‚£ä¸ª ABI_FLEN å®ç©¶ç«Ÿæ˜¯å¤šå°‘ä¸é‡è¦ï¼ˆå› ä¸ºæˆ‘ä»¬çš„ &lt;code&gt;type-&amp;gt;type&lt;/code&gt; ä¸æ˜¯ &lt;code&gt;FFI_TYPE_STRUCT&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;åŒæ—¶ &lt;code&gt;type-&amp;gt;size &amp;gt; 2 * __SIZEOF_POINTER__&lt;/code&gt; ä¸æˆç«‹ï¼ˆå› ä¸ºæˆ‘ä»¬çš„ &lt;code&gt;type&lt;/code&gt; æ˜¯ &lt;code&gt;ffi_arg&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åŸºäºä»¥ä¸Šä¸¤ç‚¹ï¼Œ&lt;code&gt;ffi_call_int&lt;/code&gt; å‡½æ•°è¿˜å°±è¢«ç®€åŒ–ä¸ºäº†ä»¥ä¸‹ä¸¤è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// å®é™…è¿›è¡Œè°ƒç”¨ï¼š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;ffi_call_asm ((&lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;) alloc_base, cb.aregs, fn, closure);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;unmarshal(&lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;amp;&lt;/span&gt;cb, cif&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;rtype, &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;, rvalue);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ä¸Šé¢é‚£ä¸ª &lt;code&gt;ffi_call_asm&lt;/code&gt; å®šä¹‰åœ¨ä¸€ä¸ª assembly æ–‡ä»¶é‡Œï¼Œç”±äºå¹¶ä¸æ˜¯æ‰€æœ‰çš„å•å…ƒæµ‹è¯•éƒ½ç‚¸ï¼Œæˆ‘æš‚ä¸”å…ˆ assume å…¶èƒ½å·¥ä½œï¼Œå› æ­¤æ¥çœ‹ &lt;code&gt;unmarshal&lt;/code&gt; å‡½æ•°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/libffi/libffi/blob/464b4b66e3cf3b5489e730c1466ee1bf825560e0/src/riscv/ffi.c#L254&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/libffi/libffi/blob/464b4b66e3cf3b5489e730c1466ee1bf825560e0/src/riscv/ffi.c#L254&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹å†…å®¹ä»æœ‰çœç•¥ï¼Œæºæ–‡ä»¶åœ¨&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// è¿™æ®µå†…å®¹ä¸åœ¨ c æ–‡ä»¶é‡Œï¼Œä¸ºäº†æ–¹ä¾¿é˜…è¯»è´´è¿‡æ¥äº†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#if __SIZEOF_POINTER__ == 8
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;#define IS_INT(type) ((type) &amp;gt;= FFI_TYPE_UINT8 &amp;amp;&amp;amp; (type) &amp;lt;= FFI_TYPE_SINT64)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#else
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;#define IS_INT(type) ((type) &amp;gt;= FFI_TYPE_UINT8 &amp;amp;&amp;amp; (type) &amp;lt;= FFI_TYPE_SINT32)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#endif
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#50fa7b&#34;&gt;unmarshal&lt;/span&gt;(call_builder &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;cb, ffi_type &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;type, &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; var, &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;data) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    size_t realign[&lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;pointer;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// ...çœç•¥äº†å¯¹äº FFI_TYPE_STRUCT å’Œæµ®ç‚¹å°æ•°ç‚¹çš„å¤„ç†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (type&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;size &lt;span style=&#34;color:#ff79c6&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt; __SIZEOF_POINTER__) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#6272a4&#34;&gt;// çœç•¥äº†å¯¹äºå¤§æ•°æ®ç±»å‹çš„å¤„ç†ï¼ˆæˆ‘ä»¬çš„ `type` æ˜¯ `ffi_arg`ï¼Œä¸å¤Ÿå¤§ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    } &lt;span style=&#34;color:#ff79c6&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (IS_INT(type&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;type) &lt;span style=&#34;color:#ff79c6&#34;&gt;||&lt;/span&gt; type&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;type &lt;span style=&#34;color:#ff79c6&#34;&gt;==&lt;/span&gt; FFI_TYPE_POINTER) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        unmarshal_atom(cb, type&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;type, data);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;return&lt;/span&gt; data;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#ff79c6&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#6272a4&#34;&gt;// æ•´ä¸ª else ä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºä¸Šé¢çš„ if å·²ç»æ»¡è¶³äº†ï¼šIS_INT(type-&amp;gt;type)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¿™ä¸ª &lt;code&gt;unmarshal&lt;/code&gt; å‡½æ•°ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆå€¼å¾—å…³æ³¨çš„ï¼Œå› æ­¤ç»§ç»­è¿›å…¥ &lt;code&gt;unmarshal_atom&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;16
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;17
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;18
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;19
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;20
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;21
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;22
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;23
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;24
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;25
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;26
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-C++&#34; data-lang=&#34;C++&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#50fa7b&#34;&gt;unmarshal_atom&lt;/span&gt;(call_builder &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;cb, &lt;span style=&#34;color:#8be9fd&#34;&gt;int&lt;/span&gt; type, &lt;span style=&#34;color:#8be9fd&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;data) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    size_t value;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#6272a4&#34;&gt;// çœç•¥æµ®ç‚¹å°æ•°ç‚¹çš„å¤„ç†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;if&lt;/span&gt; (cb&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;used_integer &lt;span style=&#34;color:#ff79c6&#34;&gt;==&lt;/span&gt; NARGREG) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        value &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;cb&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;used_stack&lt;span style=&#34;color:#ff79c6&#34;&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#ff79c6&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        value &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; cb&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;aregs&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;a[cb&lt;span style=&#34;color:#ff79c6&#34;&gt;-&amp;gt;&lt;/span&gt;used_integer&lt;span style=&#34;color:#ff79c6&#34;&gt;++&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#ff79c6&#34;&gt;switch&lt;/span&gt; (type) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;FFI_TYPE_UINT8&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd&#34;&gt;uint8_t&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;)data &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value; &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;FFI_TYPE_SINT8&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd&#34;&gt;uint8_t&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;)data &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value; &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;FFI_TYPE_UINT16&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd&#34;&gt;uint16_t&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;)data &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value; &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;FFI_TYPE_SINT16&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd&#34;&gt;uint16_t&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;)data &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value; &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;FFI_TYPE_UINT32&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd&#34;&gt;uint32_t&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;)data &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value; &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;FFI_TYPE_SINT32&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd&#34;&gt;uint32_t&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;)data &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value; &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#if __SIZEOF_POINTER__ == 8
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;FFI_TYPE_UINT64&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd&#34;&gt;uint64_t&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;)data &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value; &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;FFI_TYPE_SINT64&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;(&lt;span style=&#34;color:#8be9fd&#34;&gt;uint64_t&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;)data &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value; &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#endif
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;FFI_TYPE_POINTER&lt;/span&gt;: &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;(size_t &lt;span style=&#34;color:#ff79c6&#34;&gt;*&lt;/span&gt;)data &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value; &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#ff79c6&#34;&gt;default&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;:&lt;/span&gt; FFI_ASSERT(&lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;); &lt;span style=&#34;color:#ff79c6&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;æ³¨æ„ &lt;code&gt;data&lt;/code&gt; æ˜¯æŒ‡å‘ &lt;code&gt;ffi_arg&lt;/code&gt; ç±»å‹çš„æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª 64 ä½æ— ç¬¦å·æ•´æ•°ï¼Œä½†åœ¨å®é™…çš„è°ƒç”¨ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;gdb&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;192&lt;/span&gt;         switch &lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;gdb&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; s
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#bd93f9&#34;&gt;198&lt;/span&gt;             &lt;span style=&#34;color:#ff79c6&#34;&gt;case&lt;/span&gt; FFI_TYPE_SINT32: *&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;uint32_t *&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; value; break;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;(&lt;/span&gt;gdb&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt; p &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;type&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$1&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è¢«å½“ä½œæ˜¯ä¸€ä¸ªæŒ‡å‘ &lt;code&gt;uint32_t&lt;/code&gt; çš„æŒ‡é’ˆäº†ï¼Œåœ¨æ¥ä¸‹æ¥çš„å†™å…¥æ“ä½œä¸­ï¼Œåªå†™å…¥äº† 32 bits çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ® &lt;code&gt;switch&lt;/code&gt; å¯ä»¥æ¸…æ¥šå¾—çŸ¥ï¼š&lt;code&gt;type&lt;/code&gt; å˜é‡åœ¨æ­¤å¤„çš„å€¼ä¸º 10ï¼Œå¯¹åº”çš„å®æ˜¯ &lt;code&gt;FFI_TYPE_SINT32&lt;/code&gt; è€Œä¸æ˜¯æˆ‘ä»¬é¢„æœŸçš„ &lt;code&gt;FFI_TYPE_UINT64&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æŸ¥é˜…ç›¸å…³ man page å¯ä»¥å¾—çŸ¥ï¼Œåœ¨ä½¿ç”¨ libffi è°ƒç”¨å‡½æ•°æ—¶ï¼Œè´Ÿè´£æ¥æ”¶å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼ˆ&lt;code&gt;rint&lt;/code&gt; çš„ç±»å‹ï¼‰éœ€è¦è‡³å°‘ &lt;code&gt;sizeof(ffi_arg)&lt;/code&gt; å¤§å°
ï¼ˆä¹Ÿå°±æ˜¯ &lt;code&gt;FFI_TYPE_UINT64&lt;/code&gt; æˆ– &lt;code&gt;FFI_TYPE_SINT64&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç»“è®º&#34;&gt;
  ç»“è®º
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e7%bb%93%e8%ae%ba&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;æ­¤å¤„ RISC-V port çš„ libffi å†…éƒ¨å¹¶æœªåˆç†å¤„ç† ã€Œè¢«è°ƒç”¨å‡½æ•°ã€ è¿”å›å€¼ä¸è¶³ &lt;code&gt;sizeof(ffi_arg)&lt;/code&gt; çš„æƒ…å†µã€‚å¯¼è‡´å‘ä¸€å— 64bits å†…å­˜ï¼ˆè°ƒç”¨æ–¹ï¼‰å†™å…¥äº†
32bits çš„æ•°å­—ï¼ˆè¢«è°ƒç”¨æ–¹ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°é«˜ä½éƒ¨åˆ†åŒ…å«ä¹‹å‰æœªåˆå§‹åŒ–çš„åƒåœ¾æ•°æ®ï¼Œåªæœ‰ä½ä½è¢«å†™å…¥äº† 1ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;è°ƒç”¨å‰ rint = 72057593903531392 ä¹Ÿå°±æ˜¯ 0xFFFFFFF7FD4580
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;è°ƒç”¨å rint = 72057589742960641 ä¹Ÿå°±æ˜¯ 0xFFFFFF00000001
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;ä¿®&#34;&gt;
  ä¿®
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e4%bf%ae&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;é‚£ä¹ˆç°åœ¨å°±è¦ä¿®æ”¹ä»£ç ï¼Œä½¿å…¶ä½¿ç”¨æ­£ç¡®çš„è¿”å›å€¼ç±»å‹ï¼Œå‘ç°å·²ç»æœ‰äºº PRï¼š&lt;br&gt;
&lt;a href=&#34;https://github.com/libffi/libffi/pull/680&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/libffi/libffi/pull/680&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ª PR æ·»åŠ äº†åˆ¤æ–­ã€Œè¢«è°ƒç”¨å‡½æ•°è¿”å›å€¼ç±»å‹ã€çš„ç¬¦å·æ€§&lt;br&gt;
å¹¶æ ¹æ®ç³»ç»Ÿ bits æ•°ï¼Œè§„èŒƒåœ°é€‰ç”¨ &lt;code&gt;FFI_TYPE_{S,U}INT{32,64}&lt;/code&gt; ä¸­çš„å…¶ä¸­ä¸€ç§ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ç°åœ¨åªéœ€è¦å°†å…¶ &lt;a href=&#34;https://github.com/felixonmars/archriscv-packages/pull/1182&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;backport&lt;/a&gt; å›æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨çš„ç‰ˆæœ¬å³å¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€è€ƒ&#34;&gt;
  æ€è€ƒ
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e6%80%9d%e8%80%83&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;åœ¨åæœŸè°ƒè¯•çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å¿˜è®°çœ‹ manual pageï¼Œä¸æ¸…æ¥šã€Œå‡½æ•°è¿”å›å€¼ conventionã€ ï¼ˆä¹Ÿå°±æ˜¯ï¼Œæ˜¾å¼è§„å®šè¿”å›å€¼ï¼šéœ€è¦è‡³å°‘èƒ½æ”¾ä¸‹ä¸€ä¸ª &lt;code&gt;ffi_arg&lt;/code&gt; è¿™ä¸€éƒ¨åˆ†ï¼‰ã€‚
ä½¿å¾—åç»­ debug è¿‡ç¨‹é‡åˆ°é˜»ç¢ï¼Œåœ¨åç»­çš„å·¥ä½œä¸­è¦æ³¨æ„æŸ¥é˜…ç›¸å…³æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥åŠï¼Œä»–ä»¬è‡ªå·±ä¸è·‘å•å…ƒæµ‹è¯•çš„å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« å’•å’•å’•äº†å¤§æ¦‚ä¿©æœˆæ‰ç»ˆäºå†™å®Œ :ï¼‰ ğŸ‰ğŸ‰ğŸ‰&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>è®°ä¸€æ¬¡ debug qmake</title>
      <link>https://mooody.me/posts/2022-04/archrv-qmake6/</link>
      <pubDate>Thu, 14 Apr 2022 00:32:37 +0100</pubDate>
      
      <guid>https://mooody.me/posts/2022-04/archrv-qmake6/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;åŸæœ¬æƒ³ç”©é”… Qtï¼Œä½†åæ¥å‘ç°&lt;del&gt;å°ä¸‘ç«Ÿæ˜¯ qemu&lt;/del&gt; :)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æ­£ç‰‡å¼€å§‹&#34;&gt;
  æ­£ç‰‡å¼€å§‹
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e6%ad%a3%e7%89%87%e5%bc%80%e5%a7%8b&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;åˆæ¥ä¹åˆ° &lt;code&gt;PLCT::archrv-pkg&lt;/code&gt;ï¼Œä½œä¸ºæ–°äººæ€»æƒ³å¿«ç‚¹è´¡çŒ®ç‚¹ä»€ä¹ˆï¼Œäºæ˜¯å„ç§ç¿» build logã€‚&lt;/p&gt;
&lt;p&gt;qalculate-qt:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-log&#34; data-lang=&#34;log&#34;&gt;/usr/lib/qt6/mkspecs/features/toolchain.prf:76: Variable QMAKE_CXX.COMPILER_MACROS is not defined.
Project ERROR: failed to parse default search paths from compiler output
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰“åŒ…æœºæ‰”å‡ºäº†è¿™ä¹ˆä¸ªé”™è¯¯ï¼Œæ·±å— qmake å…¶å®³çš„æˆ‘çœ‹åˆ°è¿™å°±å‡†å¤‡å¼€ &lt;a href=&#34;https://bugreports.qt.io&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;bugreports.qt.io&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯è½¬å¤´ä¸€æƒ³ï¼šè‚¯å®šç¾¤é‡Œçš„å¤§ä½¬æ—©å°±çœ‹åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œåº”è¯¥å·²ç»åœ¨ WIP äº†å§ï¼Œäºæ˜¯åœ¨ç¾¤æ¶ˆæ¯è®°å½•é‡Œæœäº†ä¸€ä¸‹ï¼Œ
å‘ç°æœç„¶æ—©åœ¨ä¸Šä¸ªæœˆ 24 å·ï¼ˆä¸¤å‘¨å‰å·¦å³ï¼‰å°±åœ¨è®¨è®ºè¿™ä¸ªé—®é¢˜äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¯æƒœæ²¡èƒ½è§£å†³ï¼Œç¿»è®°å½•è¯´æ˜¯ qemu é‡Œç‹¬æœ‰çš„é—®é¢˜ï¼Œæ¢åˆ°ç‰©ç†æœºä¸Šå°±æ²¡äº‹äº†ã€‚&lt;/p&gt;
&lt;p&gt;æŠ±ç€è¯•ä¸€è¯•ä¸‡ä¸€èƒ½ç»™ Qt æ°´ä¸ª bugreport çš„å¿ƒæ€ï¼Œæˆ‘æ‰“å¼€äº†è¿™ä¸ªæ–‡ä»¶ï¼š&lt;code&gt;features/toolchain.prf&lt;/code&gt; å¹¶æ‰¾åˆ°ç¬¬ 76 è¡Œï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-qmake&#34; data-lang=&#34;qmake&#34;&gt;73:         cache($${target_prefix}.$$v, set stash, $$v)
74:         $${target_prefix}.COMPILER_MACROS += $$v
75:     }
76:     cache($${target_prefix}.COMPILER_MACROS, set stash) &amp;lt;- è¿™é‡Œ
77: } else {
78:     # load from the cache
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¾ˆæ˜æ˜¾æ˜¯ä¸€ä¸ª qmake å˜é‡ &amp;ldquo;&lt;code&gt;æŸäº›ä¸œè¥¿.COMPILER_MACROS&lt;/code&gt;&amp;rdquo; çš„è§£å¼•ç”¨ï¼ˆå–å€¼ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®æŠ¥é”™èƒ½çœ‹å‡º &lt;code&gt;æŸäº›ä¸œè¥¿&lt;/code&gt; åº”è¯¥æ˜¯ &lt;code&gt;QMAKE_CXX&lt;/code&gt;ï¼Œäºæ˜¯ç»§ç»­å‘ä¸Šç¿»ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-qmake&#34; data-lang=&#34;qmake&#34;&gt;66: for (v, vars) {
67:    !contains(v, &amp;#34;[A-Z_]+ = .*&amp;#34;): next()
68:     # Set both &amp;lt;varname&amp;gt; for the outer scope ...
69:     eval($$v)
70:     v ~= s/ .*//
71:     isEmpty($$v): error(&amp;#34;Compiler produced empty value for $${v}.&amp;#34;)
72:     # ... and save QMAKE_(HOST_)?CXX.&amp;lt;varname&amp;gt; in the cache.
73:     cache($${target_prefix}.$$v, set stash, $$v)
74:     $${target_prefix}.COMPILER_MACROS += $$v
75: }
76: cache($${target_prefix}.COMPILER_MACROS, set stash) &amp;lt;- æ ¸çˆ†ä¸­å¿ƒ
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç¨æœ‰å¸¸è¯†çš„äººéƒ½çŸ¥é“è¿™æ˜¯ä¸ª for loopï¼Œæ ¹æ® L74 å¯ä»¥çœ‹å‡ºè¿™ä¸ªå¾ªç¯æ˜¯ç”¨æ¥å‘
&lt;code&gt;COMPILER_MACROS&lt;/code&gt; append ä¸€äº›å€¼ï¼Œæˆ‘æƒ³èµ·äº† log è°ƒè¯•å¤§æ³•ï¼Œäºæ˜¯çœ¼ç–¾æ‰‹å¿«å°±åœ¨è¿™é™„è¿‘åŠ äº†
å‡ ä¸ª &lt;code&gt;message(&amp;quot;....&amp;quot;)&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;éšç€ qmake6 é‡æ–°è¿è¡Œï¼Œæˆ‘å‘ç°åœ¨ &lt;code&gt;for&lt;/code&gt; å¾ªç¯é‡Œå¹¶æ²¡æœ‰ä»»ä½•è¾“å‡ºå‡ºç°ï¼Œè¿™ä½¿äººä¸ç¦æ€€ç–‘è¿™ä¸ª
&lt;code&gt;for&lt;/code&gt; å¾ªç¯ç©¶ç«Ÿæœ‰æ²¡æœ‰è·‘ã€‚å¸¦ç€è¿™ä¸ªé—®é¢˜ï¼Œåˆåœ¨ &lt;code&gt;for&lt;/code&gt; ä¸Šé¢ä¸€è¡Œè¾“å‡º &lt;code&gt;vars&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯å¾ªç¯å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è¿˜ç‰¹åœ°æ‰“äº†å¼•å·ï¼Œé¿å…è¾“å‡ºçš„æ˜¯ä¸ªç©ºæ ¼ç„¶åæ¶ˆå¤±åœ¨ Konsole å¤§æµ·ä¸­ï¼Œç»“æœå‘ç°è¿™ä¸ª &lt;code&gt;var&lt;/code&gt; é‡Œå•¥ä¹Ÿ
æ²¡æœ‰ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å’‹å°±æˆç©ºçš„äº†ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç»§ç»­å‘ä¸Šç¿»ï¼Œæ•´æ®µä»£ç è¢«åŒ…åœ¨äº†ä¸€ä¸ª &lt;code&gt;isEmpty($${target_prefix}.COMPILER_MACROS) {&lt;/code&gt;
åˆ†æ”¯ï¼Œè¯´æ˜è¿™ä¸ªå˜é‡ä¸ºç©ºï¼Œå…¶å®æ˜¯åœ¨é¢„æœŸæƒ…å†µå†…ã€‚ç´§æ¥ç€æ˜¯ä¸¤ä¸ªåˆ†æ”¯ï¼š&lt;code&gt;msvc&lt;/code&gt; å’Œ &lt;code&gt;gcc|ghs&lt;/code&gt; å¾ˆæ˜æ˜¾
åº”è¯¥æ˜¯èµ° &lt;code&gt;gcc&lt;/code&gt; åˆ†æ”¯ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-qmake&#34; data-lang=&#34;qmake&#34;&gt;63: } else: gcc|ghs {
64:     vars = $$qtVariablesFromGCC($$QMAKE_CXX)
65: }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰¾åˆ° &lt;code&gt;vars&lt;/code&gt; çš„æ¥æºäº†ï¼è¿™é‡Œè°ƒç”¨äº†ä¸€ä¸ªåä¸º &lt;code&gt;qtVariablesFromGCC&lt;/code&gt; çš„å‡½æ•°ï¼Œä¼ å…¥å•ä¸ªå‚æ•°
&lt;code&gt;$$QMAKE_CXX&lt;/code&gt;ï¼Œè¿”å›ä¸€ä¸ª list ï¼ˆä¹Ÿå°±æ˜¯ &lt;code&gt;vars&lt;/code&gt;ï¼‰ï¼Œäºæ˜¯ç»§ç»­è·Ÿè¿›å‡½æ•°å» debugã€‚&lt;/p&gt;
&lt;p&gt;å‡½æ•°å®šä¹‰å¾ˆç®€å•ï¼ˆèŠ‚çœåœ°æ–¹ç¨å¾®æ”¹äº†ä¸‹ç¼©è¿›ï¼‰ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-qmake&#34; data-lang=&#34;qmake&#34;&gt;37: defineReplace(qtVariablesFromGCC) {
38:   ret = $$system(&amp;#34;$$1 -E $$system_quote($$PWD/data/macros.cpp) \
39:     2&amp;gt;$$QMAKE_SYSTEM_NULL_DEVICE&amp;#34;, lines, ec)
40:   !equals(ec, 0): qtCompilerError($$1, $$ret)
41:   return($$ret)
42: }
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‡½æ•°å¼€å¤´ç¬¬ä¸€å¥è¯ä¸€ä¸ª &lt;code&gt;system&lt;/code&gt;ï¼Œæ„æ€æ˜¯è¦è°ƒç”¨ä¸ªå­è¿›ç¨‹ï¼Œç„¶åè¯»å–è¾“å‡ºã€‚40 è¡Œçš„åˆ¤æ–­ ec æŒ‰ç…§
æ ‡å‡†ç¼©å†™åº”è¯¥æ˜¯ &lt;code&gt;error code&lt;/code&gt;ï¼Œå…ˆçŒœåº”è¯¥æ˜¯ä¸ªè¿”å›å€¼ã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯å¼€å§‹ &lt;code&gt;message()&lt;/code&gt; å¤§æ³•ã€‚&lt;/p&gt;
&lt;p&gt;äºæ˜¯å‘ç°è¿™ &lt;code&gt;ret&lt;/code&gt; ä¸ºç©ºï¼Œæˆ‘å°† &lt;code&gt;system()&lt;/code&gt; çš„å‚æ•°å•ç‹¬æ‹¿å‡ºæ¥è·‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;12
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;13
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;14
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# $$1 -E $$system_quote($$PWD/data/macros.cpp) 2&amp;gt;$$QMAKE_SYSTEM_NULL_DEVICE&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;# å‚æ•°æ›¿æ¢å¯å¾—&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ c++ -E &lt;span style=&#34;color:#ff79c6&#34;&gt;$(&lt;/span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;pwd&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;)&lt;/span&gt;/data/macros.cpp 2&amp;gt;/dev/null
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#6272a4&#34;&gt;# 0 &amp;#34;./macros.cpp&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#6272a4&#34;&gt;# 0 &amp;#34;&amp;lt;built-in&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#6272a4&#34;&gt;# 0 &amp;#34;&amp;lt;command-line&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#6272a4&#34;&gt;# 1 &amp;#34;/usr/include/stdc-predef.h&amp;#34; 1 3 4&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#6272a4&#34;&gt;# 0 &amp;#34;&amp;lt;command-line&amp;gt;&amp;#34; 2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#6272a4&#34;&gt;# 1 &amp;#34;./macros.cpp&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;QT_COMPILER_STDCXX&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; 201703L
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#6272a4&#34;&gt;# 26 &amp;#34;./macros.cpp&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;QMAKE_GCC_MAJOR_VERSION&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;11&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;QMAKE_GCC_MINOR_VERSION&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;2&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;gt; &lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;QMAKE_GCC_PATCH_VERSION&lt;/span&gt; &lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#bd93f9&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å°±æ˜¯é¢„å¤„ç†ç»“æœå˜›ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿›è¡Œäº†ä¸¤åˆ†é’Ÿï¼ˆæ²¡è®¡æ—¶ï¼‰çš„æ€è€ƒåï¼Œæˆ‘è®¤ä¸ºæ˜¯ qmake æ²¡èƒ½æ­£ç¡®æ‰§è¡Œ &lt;code&gt;system&lt;/code&gt; å‡½æ•°ï¼Œäºæ˜¯è¿˜æ˜¯å»
äº† &lt;a href=&#34;https://bugreports.qt.io&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;bugreports.qt.io&lt;/a&gt; æœç´¢ &lt;code&gt;qmake system&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://bugreports.qt.io/browse/QTBUG-98951&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;QTBUG-98951: qmake system() does not work under qemu-user&lt;/strong&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ä¸å°±æ˜¯æˆ‘é‡åˆ°çš„é—®é¢˜å—ï¼Ÿæ­£æ–‡é‡Œè¯´ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;work-around: configure with -no-feature-forkfd_pidfd&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;no-feature-forkfd_pidfd&lt;/code&gt; æ˜¯ä»€ä¹ˆ featureï¼Ÿ äºæ˜¯æˆ‘ç»§ç»­æŒ‰å…³é”®å­—æœç´¢ï¼Œæ‰¾åˆ°äº† &lt;a href=&#34;https://codereview.qt-project.org/c/qt/qtbase/&amp;#43;/313894&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Make usage of forkfd_pidfd in QProcess a configurable feature (#313894)&lt;/a&gt; ä¸­çš„ä¸€å¤„æ”¹åŠ¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;// QTBUG-86285
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6272a4&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#if !QT_CONFIG(forkfd_pidfd)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;&lt;/span&gt;    ffdflags &lt;span style=&#34;color:#ff79c6&#34;&gt;|=&lt;/span&gt; FFD_USE_FORK;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ff79c6&#34;&gt;#endif
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;é‚£ä¹ˆå…³æ‰ &lt;code&gt;forkfd_pidfd&lt;/code&gt; å°±ä½¿ &lt;code&gt;!QT_CONFIG(forkfd_pidfd)&lt;/code&gt; ä¸º &lt;code&gt;TRUE&lt;/code&gt;ï¼Œä»è€Œå¼ºåˆ¶æ·»åŠ 
&lt;code&gt;FFD_USE_FORK&lt;/code&gt; flag ç»™äº† &lt;code&gt;ffdflags&lt;/code&gt;ï¼Œè€Œè¿™å°±åº”è¯¥æ˜¯é¿å¼€äº† qemu æœªèƒ½å®ç°çš„ä¸€ä¸ªåŠŸèƒ½å§ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–æ„Ÿè°¢è‚¥çŒ«æ‰¾åˆ°äº†å¯¹åº”ç»™ qemu çš„ &lt;a href=&#34;https://patchew.org/QEMU/mvm4kadwyrm.fsf@suse.de/&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;patch&lt;/a&gt;ï¼Œä½†å¾ˆå¯æƒœçš„æ˜¯æ²¡èƒ½åˆå¹¶ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç»å†äº†ä¸€ç•ªæŠ˜è…¾åï¼Œæˆ‘åœ¨æœ¬æœºåº”ç”¨äº†ç»™ qemu çš„ patchï¼Œå‘ç° qmake çš„ &lt;code&gt;system&lt;/code&gt; æœç„¶èƒ½æ­£ç¡®æ‰§è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;è‡³æ­¤ï¼Œä¸€ä¸ªç”± &lt;code&gt;qalculate-qt&lt;/code&gt; å¼•å‘çš„ï¼Œè¢«ä»¥ä¸ºæ˜¯ Qt bug çš„ï¼Œä½†å®é™…ä¸Šæ˜¯ qemu çš„é—®é¢˜ç»ˆäº
çœŸç›¸å¤§ç™½ :) æ’’èŠ±ï¼&lt;/p&gt;
&lt;h2 id=&#34;å°ç»“&#34;&gt;
  å°ç»“
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%b0%8f%e7%bb%93&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä»¥åé‡åˆ°é—®é¢˜è¿˜æ˜¯è¦å…ˆæœç´¢ï¼Œè™½è¯´æœ¬æ¬¡ qmake å±äºæç«¯è¾¹è§’é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆæ˜¯ qmake ç°åœ¨ï¼ˆåº”è¯¥ï¼Ÿï¼‰å¾ˆå°‘äººç”¨äº†å§ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡è¿˜æ˜¯ qemu-user ï¼ˆé systemï¼Œä¸Šç¯‡æ–‡ç« è¯´é“ ArchRV è¿˜æ²¡æœ‰èƒ½è·‘çš„ imgï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†ç¡®å®ä»ç„¶æœ‰äººå…ˆé‡åˆ°äº†ï¼Œè€Œä¸”è¿›è¡Œäº†æ±‡æŠ¥å’Œ patch&lt;/p&gt;
&lt;p&gt;ä¸‹ä¸€ç¯‡æ–‡ç« ï¼ˆå¯èƒ½ï¼‰å†™å†™ Qt Webengine çš„ patch è¿‡ç¨‹ï¼ˆå¦‚æœæˆ‘èƒ½æ‰“å‡ºæ¥çš„è¯ï¼‰&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>PLCT åˆä½“éªŒ</title>
      <link>https://mooody.me/posts/2022-04/plct-experience-1/</link>
      <pubDate>Thu, 14 Apr 2022 00:07:37 +0100</pubDate>
      
      <guid>https://mooody.me/posts/2022-04/plct-experience-1/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;å•Šï¼Ÿ ç³»ç»Ÿé•œåƒè¿˜æ²¡æœ‰å•Šï¼Ÿ&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ¬ç¯‡æ–‡ç« è®°å½•çš„æ˜¯æˆ‘åœ¨ PLCT &lt;del&gt;å®ä¹ &lt;/del&gt;å½“å·¥å…·äººçš„åˆä½“éªŒ&lt;/p&gt;
&lt;h2 id=&#34;å¼€ç«¯&#34;&gt;
  ã€Šå¼€ç«¯ã€‹
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e5%bc%80%e7%ab%af&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;å°±æ˜¯ç¾¡æ…•ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ä¸€è‘—åäººå£«æ›¾ç»è¯´è¿‡ï¼š&lt;code&gt;ç¾¤æˆ‘ä¸ plct&lt;/code&gt;ï¼Œæœ‰ä¸€ç¬é—´æˆ‘ç¡®å®æ„Ÿè§‰åˆ°: &amp;ldquo;æ€ä¹ˆä»–ä»¬éƒ½åœ¨ï¼Ÿ&amp;quot;ï¼Œäºæ˜¯æˆ‘å¼€å§‹
å››å¤„è°ƒæŸ¥ï¼Œæˆ‘æƒ³èµ·ä¹‹å‰åœ¨ B ç«™çœ‹è¿‡ PLCT ç¼–è¯‘å™¨å°ç»„çš„ Report æ„Ÿè§‰éå¸¸å‰å®³ï¼Œåœ¨å†…å¿ƒé‡Œä¸€ç¬é—´ç‡ƒ
èµ·äº†ä¸€æ ªå°å°çš„ç«è‹—ï¼š&amp;ldquo;æˆ‘ä¹Ÿæƒ³åƒä»–ä»¬ä¸€æ ·&amp;rdquo;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç»è¿‡äº†é•¿è¾¾ï¼ˆä¸€å¤©ï¼‰çš„è°ƒæŸ¥ä»¥åï¼Œæˆ‘ç»ˆäºå…¨é¢äº†è§£äº†å®ä¹ çš„ä¸åŒç§ç±»ï¼Œï¼ˆèº«ä¸º Arch ç”¨æˆ·å¤–åŠ èº«è¾¹å¾ˆå¤šæœ‹å‹éƒ½åœ¨ Arch RISC-V æ‰“åŒ…å°ç»„ï¼‰ï¼Œæˆ‘ä¹Ÿå°±é€‰æ‹©äº†è¿™é‡Œã€‚æˆ‘è¿˜äº†è§£åˆ°äº† ArchRV å°ç»„çš„ç”³è¯·è¦æ±‚
ï¼š ä¸€ä¸ª &lt;code&gt;addpkg&lt;/code&gt; PR å’Œç®€å†ï¼ˆæ®è¯´ä¸çœ‹ï¼Ÿï¼Œä½†è¿˜æ˜¯æˆ˜æˆ˜å…¢å…¢åœ°å®Œå–„äº†ä¸€ä¸‹ï¼‰ï¼Œä¸€ç¯‡ä¸é•¿äº 300
æ±‰å­—çš„å°çŸ­æ–‡ã€‚&lt;/p&gt;
&lt;p&gt;èŠ±äº†ä¸€æ™šä¸Šæ—¶é—´å‡†å¤‡å¥½èµ„æ–™ï¼Œç»ˆäºæŠŠé‚®ä»¶å‘äº†å‡ºå»ï¼ˆå‡ ä¸ª addpkg çš„åŒ…ä¹Ÿéƒ½åˆå¹¶äº†ï¼Œéƒ½æ˜¯å¾ˆç®€å•çš„ä¿®å¤
ç®€ç›´ä¸æ•¢è¯´æ˜¯ fixï¼‰ï¼Œå…³æœºç¡è§‰&lt;/p&gt;
&lt;h3 id=&#34;ç¬¬äºŒå¤©&#34;&gt;
  ç¬¬äºŒå¤©
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e7%ac%ac%e4%ba%8c%e5%a4%a9&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;KMail å‘æˆ‘ :) æ˜æ˜å·²ç»æ”¶åˆ°äº†å›é‚®ï¼Œä½†æ˜¯å¹¶æœªæé†’æˆ‘æ–°é‚®ä»¶ï¼Œç›´æ¥å’•äº†&lt;/p&gt;
&lt;h3 id=&#34;ç¬¬ä¸‰å¤©&#34;&gt;
  ç¬¬ä¸‰å¤©
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e7%ac%ac%e4%b8%89%e5%a4%a9&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;&lt;del&gt;ä¸€ä¸ªè‡ªç§° Wu Wei&lt;/del&gt; çš„äººè”ç³»åˆ°äº†æˆ‘ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘: æˆ‘æƒ³é—®ä¸€ä¸‹ï¼Œæœ‰é¢è¯•ç¯èŠ‚ä»€ä¹ˆçš„å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¯¹é¢ï¼šé¢è¯•äº†ï¼Œé¢è¯•é€šè¿‡äº†&lt;/p&gt;
&lt;p&gt;æˆ‘: ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¥ä¸‹æ¥å°±æ˜¯å„ç§èµ„æ–™çš„å¡«å†™ï¼Œç­¾å­—ï¼Œæäº¤ä¸€ç³»åˆ— paperworkï¼Œå¾ˆæ ‡å‡†åœ°èµ°ä¸ªæµç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æˆ‘çš„ç¬¬ä¸€ä¸ªæ­£ç»çš„-fix&#34;&gt;
  æˆ‘çš„ç¬¬ä¸€ä¸ªæ­£ç»çš„ fix
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e6%88%91%e7%9a%84%e7%ac%ac%e4%b8%80%e4%b8%aa%e6%ad%a3%e7%bb%8f%e7%9a%84-fix&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä¸‹ä¸€ç¯‡å†è¯´&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Qt 6.3 ä¸­ QML çš„å‘</title>
      <link>https://mooody.me/posts/2022-04/qt63-qmlimportscanner/</link>
      <pubDate>Sat, 02 Apr 2022 13:43:37 +0100</pubDate>
      
      <guid>https://mooody.me/posts/2022-04/qt63-qmlimportscanner/</guid>
      <description>&lt;h2 id=&#34;ä¼°è®¡æ˜¯-regression-äº†&#34;&gt;
  ä¼°è®¡æ˜¯ Regression äº†
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e4%bc%b0%e8%ae%a1%e6%98%af-regression-%e4%ba%86&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;h3 id=&#34;qmlimportscanner&#34;&gt;
  &lt;code&gt;qmlimportscanner&lt;/code&gt;
  &lt;a class=&#34;heading-link&#34; href=&#34;#qmlimportscanner&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;æˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œç”± &lt;code&gt;androiddeployqt&lt;/code&gt; è°ƒç”¨çš„ &lt;code&gt;qmlimportscanner&lt;/code&gt; æ‰¾ä¸åˆ°å°±åœ¨æœ¬ç›®å½•ä¸‹çš„ &lt;code&gt;QtGraphicalEffects&lt;/code&gt; QML Moduleã€‚&lt;/p&gt;
&lt;h3 id=&#34;android-å¹³å°é»‘å±å¡æ­»&#34;&gt;
  Android å¹³å°é»‘å±å¡æ­»
  &lt;a class=&#34;heading-link&#34; href=&#34;#android-%e5%b9%b3%e5%8f%b0%e9%bb%91%e5%b1%8f%e5%8d%a1%e6%ad%bb&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œå½“ä½¿ç”¨ Qt 6.3 ç¼–è¯‘å‡ºçš„ Android APK æ—¶ï¼Œæˆ‘çš„ &lt;code&gt;MoodyAPI Client&lt;/code&gt; ä¸€æ—¦é€€å‡ºå°±æ— æ³•å†è¿›å…¥ç•Œé¢ï¼ˆSigh&lt;/p&gt;
&lt;h3 id=&#34;è§£å†³æ–¹æ³•&#34;&gt;
  è§£å†³æ–¹æ³•
  &lt;a class=&#34;heading-link&#34; href=&#34;#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%b3%95&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;&lt;del&gt;å›é€€åˆ° Qt6.2&lt;/del&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Press F to pay respects.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
    </item>
    
  </channel>
</rss>