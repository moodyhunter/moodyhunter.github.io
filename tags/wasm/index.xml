<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Wasm on Moody&#39;s</title>
    <link>https://mooody.me/tags/wasm/</link>
    <description>Recent content in Wasm on Moody&#39;s</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 30 May 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://mooody.me/tags/wasm/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ä»æºç ç¼–è¯‘ Qt6 for WASM - Part 2</title>
      <link>https://mooody.me/posts/2021-05/qt-build-from-source-2/</link>
      <pubDate>Sun, 30 May 2021 00:00:00 +0000</pubDate>
      
      <guid>https://mooody.me/posts/2021-05/qt-build-from-source-2/</guid>
      <description>&lt;p&gt;&lt;del&gt;æ—¶é—´è¿‡å¾—å¥½å¿«ï¼Œè‡ªä»ä¸Šæ¬¡å‘ post å·²ç»è¿‡äº†ä¸€å‘¨&lt;/del&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¶ç€æ·±å¤œåœç”µæ­£å¥½èƒ½æ€»ç»“ä¸€ä¸‹è¿™å‘¨æ‰è¿›çš„å‘ï¼ˆæˆ‘ä¿è¯æ²¡æœ‰å’•å’•å’•ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;1-qt-host-build&#34;&gt;
  1. &amp;ldquo;Qt Host Build&amp;rdquo;?
  &lt;a class=&#34;heading-link&#34; href=&#34;#1-qt-host-build&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ä½ çœ‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;-- Searching for tool &amp;#39;Qt6::moc&amp;#39; in package Qt6CoreTools.
CMake Warning at cmake/QtToolHelpers.cmake:83 (find_package):
  Could not find a configuration file for package &amp;#34;Qt6CoreTools&amp;#34; that is
  compatible with requested version &amp;#34;6.2.0&amp;#34;.

  The following configuration files were considered but not accepted:

    /lib/cmake/Qt6CoreTools/Qt6CoreToolsConfig.cmake, version: 6.1.0

Call Stack (most recent call first):
  src/tools/moc/CMakeLists.txt:8 (qt_internal_add_tool)


CMake Error at cmake/QtToolHelpers.cmake:109 (message):
  The tool &amp;#34;Qt6::moc&amp;#34; was not found in the Qt6CoreTools package.  Package
  found: 0
Call Stack (most recent call first):
  src/tools/moc/CMakeLists.txt:8 (qt_internal_add_tool)


-- Configuring incomplete, errors occurred!
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çœ‹åˆ°è¿™ä¹ˆä¸€å¤§ä¸²é”™è¯¯ä¿¡æ¯æˆ‘ä¸€ä¸‹å­å°±æ…Œäº†ï¼ŒCMake å‘Šè¯‰æˆ‘ &lt;code&gt;Could not find &amp;quot;Qt6CoreTools&amp;quot; .... with requested version &amp;quot;6.2.0&amp;quot;, The following configuration files were considered but not accepted .... version: 6.1.0&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å¥½å®¶ä¼™é‚£çœ‹æ¥æˆ‘è¿˜éœ€è¦ä¸€ä¸ª Qt6 çš„ Host Build&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰€è°“ Host Build å³ä¸ºæœ¬åœ°ç¼–è¯‘å¹³å°ç¯å¢ƒä¸‹çš„ Qt ç¼–è¯‘ï¼Œæˆ–è€…å¯ä»¥ç§°ä¸º &amp;ldquo;åŸç”Ÿå¹³å°&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªå¯æ€•çš„äº‹å®å‘Šè¯‰æˆ‘ï¼š &lt;strong&gt;æˆ‘è¿˜éœ€è¦ç¼–è¯‘ä¸€ä¸ª 6.2 çš„ Linux ç‰ˆ Qt&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;2-to-build-qt-build-qt-first&#34;&gt;
  2. &lt;del&gt;To Build Qt, Build Qt First&lt;/del&gt;
  &lt;a class=&#34;heading-link&#34; href=&#34;#2-to-build-qt-build-qt-first&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æ—¢ç„¶ Qt 6.1 æ— æ³•æ»¡è¶³ç¼–è¯‘çš„è¦æ±‚ï¼Œé‚£ä¹ˆå°±å¾—æ•´ä¸€ä¸ª 6.2 ç‰ˆæœ¬ Native Platform çš„ Qt å½“ Host&lt;/p&gt;
&lt;p&gt;é¦–å…ˆä½¿ç”¨ &lt;strong&gt;ä¼  ç»Ÿ è‰º èƒ½&lt;/strong&gt;ï¼š &lt;code&gt;mkdir build; cd build; cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=host_installed&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;hellip;&amp;hellip;
ğŸ’¥ BOOM ğŸ’¥
&amp;hellip;&amp;hellip;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;QtGraphicalEffects å’Œ Qt5Compat é‡Œé¢çš„ GraphicalEffects æ’äº† Target&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰‹åŠ¨åˆ æ‰äº† qt5/qt5compat æ–‡ä»¶å¤¹æ¥é¿å…è¢« build&lt;/li&gt;
&lt;li&gt;æˆ–è®¸æ­£èµ¶ä¸Š Qt åœ¨è¿›è¡Œ repo è½¬ç§»ï¼Œåç»­å°è¯•çš„æ—¶å€™å°±æ²¡æœ‰å‡ºç°è¿™ä¸ªé”™è¯¯äº†&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ç¬¬ä¸€æ¬¡å°è¯•çš„æ—¶å€™å¿˜è®°åŠ  ccacheï¼Œç¼–è¯‘ä¸€æ¬¡å¤§æ¦‚åŠä¸ªå°æ—¶ï¼Œç”¨ ccache èƒ½èŠ‚çº¦è‡³å°‘ä¸‰åˆ†ä¹‹ä¸€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Qt çš„ç¼–è¯‘å‚æ•°å¾ˆäººæ€§åŒ–ï¼Œç›´æ¥ä¸€ä¸ª &lt;code&gt;-DQT_USE_CCACHE=ON&lt;/code&gt; å°±å®Œäº‹äº†&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å› ä¸ºåœ¨ &lt;a href=&#34;https://github.com/qt/qtbase/blob/9db7cc79a26ced4997277b5c206ca15949133240/cmake/QtSetup.cmake#L217&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™ä¸ªåœ°æ–¹&lt;/a&gt; ä¼šè‡ªåŠ¨æŸ¥æ‰¾ ccache&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ ¹æ® QtCreator çš„ CI é…ç½®æ¥çœ‹ï¼Œccache è¦åŠ ä¸€äº› sloppiness è®¾ç½®ï¼ˆæ¯”å¦‚ &lt;code&gt;time_macros&lt;/code&gt;, &lt;code&gt;pch_defines&lt;/code&gt; å’Œ &lt;code&gt;file_macro&lt;/code&gt;ï¼‰äºæ˜¯ç…§æ¬äº†è¿‡æ¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;3-é‡æ–°ç¼–è¯‘-wasm-ç‰ˆæœ¬&#34;&gt;
  3. é‡æ–°ç¼–è¯‘ WASM ç‰ˆæœ¬
  &lt;a class=&#34;heading-link&#34; href=&#34;#3-%e9%87%8d%e6%96%b0%e7%bc%96%e8%af%91-wasm-%e7%89%88%e6%9c%ac&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ç»è¿‡äº†åƒè¾›ä¸‡è‹¦ï¼Œç»ˆäºæˆåŠŸç¼–è¯‘å‡ºäº† Native Platform Qtï¼Œä¸‹é¢å°±è¦è¿›è¡Œç´§å¼ åˆºæ¿€çš„ Cross-Compile ç¯èŠ‚&lt;/p&gt;
&lt;h3 id=&#34;31-é”™è¯¯çš„ç¼–è¯‘å‚æ•°&#34;&gt;
  3.1 é”™è¯¯çš„ç¼–è¯‘å‚æ•°
  &lt;a class=&#34;heading-link&#34; href=&#34;#31-%e9%94%99%e8%af%af%e7%9a%84%e7%bc%96%e8%af%91%e5%8f%82%e6%95%b0&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­çš„ CMake å‚æ•°ï¼Œå¹¶ä¿®æ”¹å¯¹åº” &lt;code&gt;QT_HOST_PATH&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cmake ~/Work/qt5/qtbase/ &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -GNinja &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DFEATURE_developer_build&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;ON &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DFEATURE_headersclean&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;OFF &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DFEATURE_precompile_header&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;OFF &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DWARNINGS_ARE_ERRORS&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;OFF &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DBUILD_EXAMPLES&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;OFF &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DBUILD_TESTING&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;OFF &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DCMAKE_INSTALL_PREFIX&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;~/Work/qt-build/wasm-installed &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DCMAKE_TOOLCHAIN_FILE&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;~/.local/emsdk/upstream/emscripten/cmake/Modules/Platform/Emscripten.cmake &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DQT_HOST_PATH&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;~/Work/qt-build/host-installed
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;çœ‹è¿™èŠ‚æ ‡é¢˜å°±èƒ½çŒœåˆ°äº†ï¼ŒCMake æŠ±æ€¨ &lt;code&gt;ERROR: Static builds don&#39;t support RPATH&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å–µï¼Ÿ éƒ½ Target WASM äº†è¿˜ä¸çŸ¥é“è‡ªå·±å…³æ‰ RPATHï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;äºæ˜¯æœç´¢ç›¸å…³å‚æ•°ï¼š &lt;code&gt;-DFEATURE_rpath=OFF&lt;/code&gt;ï¼Œå¹¶æ¸…é™¤ CMake ç¼“å­˜é‡æ–°ç¼–è¯‘&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ¼«é•¿çš„ä¸€ä¸ªå°æ—¶è¿‡å»äº†ï¼ŒQtBase æ¨¡å—ç»ˆäºç¼–è¯‘å®Œï¼Œå¿ƒæƒ…æ¿€åŠ¨ç›´æ¥å½“åœº &lt;code&gt;cmake --install .&lt;/code&gt; å¹¶å¼€å§‹ç¼–è¯‘å…¶ä»–æ¨¡å—ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;QtShaderTools&lt;/li&gt;
&lt;li&gt;QtSvg&lt;/li&gt;
&lt;li&gt;QtImageFormats&lt;/li&gt;
&lt;li&gt;QtDeclarative&lt;/li&gt;
&lt;li&gt;QtCharts&lt;/li&gt;
&lt;li&gt;QtRemoteObjects&lt;/li&gt;
&lt;li&gt;QtWebSocket&lt;/li&gt;
&lt;li&gt;QtQuick3Dã€&lt;/li&gt;
&lt;li&gt;QtQuickTimeLine&lt;/li&gt;
&lt;li&gt;QtDataVisualization&lt;/li&gt;
&lt;li&gt;&amp;hellip;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Qt Company å¾ˆäººæ€§åŒ–çš„æä¾›äº† &lt;code&gt;$QT_INSTALL_DIR/bin/qt-configure-modules&lt;/code&gt; äºæ˜¯ç›´æ¥å¸¦ç€æºä»£ç æ–‡ä»¶å¤¹å½“ä½œå‚æ•°ç”¨å°±å®Œäº‹äº†&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#8be9fd;font-style:italic&#34;&gt;$QT_INSTALL_DIR&lt;/span&gt;/bin/qt-configure-modules ~/Work/qt5/-MODULE_NAME-
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;å°±è¿™æ ·ç¼–è¯‘å¥½äº†æ‰€æœ‰éœ€è¦çš„ Modules å´åœ¨ä½¿ç”¨ä¸Šé‡åˆ°äº†ä¸€äº›é—®é¢˜&lt;/p&gt;
&lt;p&gt;â¬…ï¸ To Be Continued&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä»æºç ç¼–è¯‘ Qt6 for WASM - Part 1</title>
      <link>https://mooody.me/posts/2021-05/qt-build-from-source/</link>
      <pubDate>Mon, 24 May 2021 00:00:00 +0000</pubDate>
      
      <guid>https://mooody.me/posts/2021-05/qt-build-from-source/</guid>
      <description>&lt;h2 id=&#34;1-qt6&#34;&gt;
  1. Qt6
  &lt;a class=&#34;heading-link&#34; href=&#34;#1-qt6&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æ—¶å…‰èè‹’ï¼Œ&lt;a href=&#34;https://www.qt.io/blog/qt-6.0-released&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Qt6 å‘å¸ƒ&lt;/a&gt; å·²ç»æ˜¯å»å¹´çš„äº‹æƒ…ï¼Œæˆªæ­¢åˆ°å†™æ–‡ç« çš„æ—¶å€™ Qt 6.1 éƒ½å·²ç»å‘å¸ƒå¾ˆä¹…&lt;/p&gt;
&lt;p&gt;Qt5 å’Œ 6 ä¹‹é—´ä¸€ä¸ªé‡å¤§çš„æ”¹å˜å°±æ˜¯ Build System ä» qmake è½¬å‘äº† CMake ï¼ˆå¤ªå¥½äº†ï¼ï¼‰ï¼Œè€Œåè€…æœ‰æ›´å¤šçš„ C/C++ é¡¹ç›®æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;åœ¨ GitHub æœç´¢ qmake&#34; src=&#34;https://mooody.me/posts/2021-05/qt-build-from-source/search-qmake.png&#34;&gt; &lt;img alt=&#34;åœ¨ GitHub æœç´¢ CMake&#34; src=&#34;https://mooody.me/posts/2021-05/qt-build-from-source/search-cmake.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆè¿™æ•°é‡çº§ä¹‹å·®ä¸ç”¨æˆ‘å¤šè¯´å•¥äº†å§ï¼‰&lt;/p&gt;
&lt;p&gt;Qt 6.0 ä¸»è¦çš„ç›®æ ‡æ˜¯ &amp;ldquo;èƒ½ç”¨å°±è¡Œ&amp;rdquo;ï¼Œå› æ­¤ä»–ä»¬åªåœ¨ release é‡Œé¢åŒ…å«äº†&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;qtbase&lt;/code&gt;ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qtdeclarative&lt;/code&gt;ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qt5compat&lt;/code&gt;ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qtshadertools&lt;/code&gt;ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qtwayland&lt;/code&gt; å’Œ &lt;code&gt;qtquick3d&lt;/code&gt; è¿™äº›ç›¸å¯¹åŸºç¡€çš„ç»„ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Qt 6.1 åœ¨æ­¤åŸºç¡€ä¸Šåˆå¢åŠ äº†&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;qtcharts&lt;/code&gt;ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qtdatavis3d&lt;/code&gt;ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qtimageformats&lt;/code&gt;ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qtnetworkauth&lt;/code&gt;ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qtvirtualkeyboard&lt;/code&gt; å’Œ &lt;code&gt;qtlottie&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç›¸æ¯”ä¹‹ä¸‹ 6.1 åŒ…å«çš„ç»„ä»¶å·²ç»å¾ˆå¤šäº†&lt;/p&gt;
&lt;h2 id=&#34;2-wasm&#34;&gt;
  2. WASM
  &lt;a class=&#34;heading-link&#34; href=&#34;#2-wasm&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æˆ‘å¿ƒå¿ƒå¿µå¿µçš„ Qt for WASM è¿˜æ˜¯æ²¡æ¥ã€‚&lt;/p&gt;
&lt;p&gt;åæ¥çœ‹åˆ° &lt;em&gt;&lt;a href=&#34;https://bugreports.qt.io/browse/QTBUG-87471&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;QTBUG-87471&lt;/a&gt;&lt;/em&gt; æ‰çŸ¥é“è¿˜å¾—ç­‰åˆ° Qt 6.2ï¼Œè¿™è®©æˆ‘èŒç”Ÿäº†ä»æºç ç¼–è¯‘çš„&lt;del&gt;å†²åŠ¨&lt;/del&gt;&lt;/p&gt;
&lt;h2 id=&#34;3-èƒ½ç¼–è¯‘äº†å—&#34;&gt;
  3. â€œèƒ½ç¼–è¯‘äº†å—ï¼Ÿâ€
  &lt;a class=&#34;heading-link&#34; href=&#34;#3-%e8%83%bd%e7%bc%96%e8%af%91%e4%ba%86%e5%90%97&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;å› ä¸ºè¦ç¼–è¯‘çš„æ˜¯ dev åˆ†æ”¯çš„ Qt6ï¼Œæˆ‘å†³å®šç”¨ git æ‹‰æºç ï¼Œè¿˜èƒ½éšæ—¶ &lt;code&gt;git pull&lt;/code&gt; åˆ°æœ€æ–°çš„ç‰ˆæœ¬ï¼Œäºæ˜¯å¼€å§‹ clone&lt;/p&gt;
&lt;p&gt;è¯•äº†ä¸€åœˆå‘ç° GitHub çš„ &lt;a href=&#34;https://github.com/qt/qt5&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;mirror&lt;/a&gt; æ¯”è¾ƒå¿« &lt;del&gt;(è™½ç„¶ repo å« qt5 ä½†ä»–å…¶å®é‡Œé¢æ˜¯ qt çš„ dev åˆ†æ”¯ï¼Œç®€ç›´å¤ªè¿·æƒ‘äº†)&lt;/del&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ git clone https://github.com/qt/qt5 --recursive &lt;span style=&#34;color:#6272a4&#34;&gt;# ä½¿ç”¨ recursive æŠŠæ‰€æœ‰ submodules éƒ½æ‹‰ä¸‹æ¥ï¼&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ã€Œ&lt;em&gt;å“¦æ·¦ï¼Œdev åˆ†æ”¯æ²¡æœ‰æ–‡æ¡£å•Š&lt;/em&gt;ã€&lt;/p&gt;
&lt;p&gt;â€¦â€¦ ï¼ˆå†·åœºï¼‰&lt;/p&gt;
&lt;h2 id=&#34;4-è—åœ¨è§’è½çš„ç¼–è¯‘æ–‡æ¡£&#34;&gt;
  4. è—åœ¨è§’è½çš„ç¼–è¯‘æ–‡æ¡£
  &lt;a class=&#34;heading-link&#34; href=&#34;#4-%e8%97%8f%e5%9c%a8%e8%a7%92%e8%90%bd%e7%9a%84%e7%bc%96%e8%af%91%e6%96%87%e6%a1%a3&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;ç»è¿‡äº† 114514 å°æ—¶çš„é«˜å¼ºåº¦æœç´¢ï¼Œç»ˆäºåœ¨ &lt;a href=&#34;https://bugreports.qt.io/browse/QTBUG-78647#comment-539018&#34;  class=&#34;external-link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;QTBUG-78647&lt;/a&gt; è¯„è®ºåŒºæ‰¾åˆ°äº†ä¸€ç‚¹ç‚¹ç¼–è¯‘å‚æ•°çš„ Hints&lt;/p&gt;
&lt;p&gt;äºæ˜¯ç«‹å³å¼€å§‹ build, çœ‹äº†çœ‹ä¸¤ä¸ª notes éƒ½è·Ÿæˆ‘æ²¡å…³ç³»å˜›&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;ldquo;&lt;em&gt;NOTE You need an ultra recent version of cmake&lt;/em&gt;&amp;rdquo;
&lt;ul&gt;
&lt;li&gt;Arch ç”¨æˆ·ä»æ¥ä¸æ‹…å¿ƒç‰ˆæœ¬å¤ªæ—§&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&amp;ldquo;&lt;em&gt;NOTE You will need to host build of Qt 6.0.x, easiest to download the binary release for your desktop platform. Building from git also works.&lt;/em&gt;&amp;rdquo;
&lt;ul&gt;
&lt;li&gt;å–µï¼Ÿ é‚£æˆ‘ &lt;code&gt;pacman -S qt6&lt;/code&gt; ä¸å°±å¥½äº†&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;5-å¼€æ&#34;&gt;
  5. å¼€æï¼
  &lt;a class=&#34;heading-link&#34; href=&#34;#5-%e5%bc%80%e6%90%9e&#34;&gt;
    &lt;i class=&#34;fa-solid fa-link&#34; aria-hidden=&#34;true&#34; title=&#34;é“¾æ¥åˆ°æ ‡é¢˜&#34;&gt;&lt;/i&gt;
    &lt;span class=&#34;sr-only&#34;&gt;é“¾æ¥åˆ°æ ‡é¢˜&lt;/span&gt;
  &lt;/a&gt;
&lt;/h2&gt;
&lt;p&gt;æ‹¿æ¥è¯„è®ºåŒºçš„ç¼–è¯‘å‚æ•°ï¼Œç¨å¾®æ”¹äº†æ”¹ï¼Œå°±å˜æˆäº†&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;
&lt;table style=&#34;border-spacing:0;padding:0;margin:0;border:0;&#34;&gt;&lt;tr&gt;&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 1
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 2
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 3
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 4
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 5
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 6
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 7
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 8
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt; 9
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;10
&lt;/span&gt;&lt;span style=&#34;white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td style=&#34;vertical-align:top;padding:0;margin:0;border:0;;width:100%&#34;&gt;
&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cmake ~/Work/qt5/qtbase/ &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -GNinja &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DFEATURE_developer_build&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;ON &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DFEATURE_headersclean&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;OFF &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DFEATURE_precompile_header&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;OFF &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DWARNINGS_ARE_ERRORS&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;OFF &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DBUILD_EXAMPLES&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;OFF &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DBUILD_TESTING&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;OFF &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DCMAKE_INSTALL_PREFIX&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;~/Work/qt-build/wasm-installed &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DCMAKE_TOOLCHAIN_FILE&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;~/.local/emsdk/upstream/emscripten/cmake/Modules/Platform/Emscripten.cmake &lt;span style=&#34;color:#f1fa8c&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f1fa8c&#34;&gt;&lt;/span&gt;  -DQT_HOST_PATH&lt;span style=&#34;color:#ff79c6&#34;&gt;=&lt;/span&gt;/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Qt çš„ CMake Configure è¿‡ç¨‹å¼‚å¸¸åœ°è€—æ—¶ï¼Œäºæ˜¯æ¼«é•¿çš„ç­‰å¾…å¼€å§‹äº†&lt;/p&gt;
&lt;p&gt;â¬…ï¸ To Be Continued&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>